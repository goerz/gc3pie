

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GC3Libs programming API &mdash; gc3pie development (SVN $Revision$) documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'development (SVN $Revision$)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="gc3pie development (SVN $Revision$) documentation" href="../index.html" />
    <link rel="up" title="GC3Libs" href="index.html" />
    <link rel="next" title="Contributing to GC3Pie" href="../contributing.html" />
    <link rel="prev" title="GC3Pie tutorial - Warholize" href="tutorial/warholize.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23320630-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../contributing.html" title="Contributing to GC3Pie"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial/warholize.html" title="GC3Pie tutorial - Warholize"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">gc3pie development (SVN $Revision$) documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">GC3Libs</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gc3libs-programming-api">
<h1>GC3Libs programming API<a class="headerlink" href="#gc3libs-programming-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-gc3libs">
<span id="gc3libs"></span><h2><cite>gc3libs</cite><a class="headerlink" href="#module-gc3libs" title="Permalink to this headline">¶</a></h2>
<p>GC3Libs is a python package for controlling the life-cycle of a Grid
or batch computational job.</p>
<p>GC3Libs provides services for submitting computational jobs to Grids
and batch systems, controlling their execution, persisting job
information, and retrieving the final output.</p>
<p>GC3Libs takes an application-oriented approach to batch computing. A
generic <a class="reference internal" href="#gc3libs.Application" title="gc3libs.Application"><tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt></a> class provides the basic operations for
controlling remote computations, but different <a class="reference internal" href="#gc3libs.Application" title="gc3libs.Application"><tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt></a>
subclasses can expose adapted interfaces, focusing on the most
relevant aspects of the application being represented.</p>
<dl class="class">
<dt id="gc3libs.Application">
<em class="property">class </em><tt class="descclassname">gc3libs.</tt><tt class="descname">Application</tt><big>(</big><em>arguments</em>, <em>inputs</em>, <em>outputs</em>, <em>output_dir</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Support for running a generic application with the GC3Libs.
The following parameters are <em>required</em> to create an <cite>Application</cite>
instance:</p>
<dl class="docutils">
<dt><cite>arguments</cite></dt>
<dd>List or sequence of program arguments. The program to execute is
the first one.; any object in the list will be converted to
string via Python&#8217;s <cite>str()</cite>.</dd>
<dt><cite>inputs</cite></dt>
<dd><p class="first">Files that will be copied to the remote execution node before
execution starts.</p>
<p>There are two possible ways of specifying the <cite>inputs</cite> parameter:</p>
<ul class="last">
<li><p class="first">It can be a Python dictionary: keys are local file paths or
URLs, values are remote file names.</p>
</li>
<li><p class="first">It can be a Python list: each item in the list should be a
pair <cite>(source, remote_file_name)</cite>: the <cite>source</cite> can be a
local file or a URL; <cite>remote_file_name</cite> is the path
(relative to the execution directory) where <cite>source</cite> will be
downloaded.  If <cite>remote_file_name</cite> is an absolute path, an
<tt class="xref py py-class docutils literal"><span class="pre">InvalidArgument</span></tt> error is raised.</p>
<p>A single string <cite>file_name</cite> is allowed instead of the pair
and results in the local file <cite>file_name</cite> being copied to
<cite>file_name</cite> on the remote host.</p>
</li>
</ul>
</dd>
<dt><cite>outputs</cite></dt>
<dd><p class="first">Files and directories that will be copied from the remote
execution node back to the local computer (or a
network-accessible server) after execution has completed.
Directories are copied recursively.</p>
<p>There are three possible ways of specifying the <cite>outputs</cite> parameter:</p>
<ul>
<li><p class="first">It can be a Python dictionary: keys are remote file or
directory paths (relative to the execution directory), values
are corresponding local names.</p>
</li>
<li><p class="first">It can be a Python list: each item in the list should be a
pair <cite>(remote_file_name, destination)</cite>: the <cite>destination</cite>
can be a local file or a URL; <cite>remote_file_name</cite> is the path
(relative to the execution directory) that will be uploaded
to <cite>destination</cite>.  If <cite>remote_file_name</cite> is an absolute
path, an <tt class="xref py py-class docutils literal"><span class="pre">InvalidArgument</span></tt> error is raised.</p>
<p>A single string <cite>file_name</cite> is allowed instead of the pair
and results in the remote file <cite>file_name</cite> being copied to
<cite>file_name</cite> on the local host.</p>
</li>
<li><p class="first">The constant <cite>gc3libs.ANY_OUTPUT</cite> which instructs GC3Libs to
copy every file in the remote execution directory back to the
local output path (as specified by the <cite>output_dir</cite> attribute).</p>
</li>
</ul>
<p class="last">Note that no errors will be raised if an output file is not present.
Override the <tt class="xref py py-meth docutils literal"><span class="pre">terminated()</span></tt> method to raise errors for reacting
on this kind of failures.</p>
</dd>
<dt><cite>output_dir</cite></dt>
<dd>Path to the base directory where output files will be downloaded.
Output file names are interpreted relative to this base directory.</dd>
<dt><cite>requested_cores</cite>,`requested_memory`,`requested_walltime`</dt>
<dd>specify resource requirements for the application:
* the number of independent execution units (CPU cores),
* amount of memory (as a <a class="reference internal" href="#gc3libs.quantity.Memory" title="gc3libs.quantity.Memory"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.quantity.Memory</span></tt></a> object),
* amount of wall-clock time to allocate for the computational job (as a <a class="reference internal" href="#gc3libs.quantity.Duration" title="gc3libs.quantity.Duration"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.quantity.Duration</span></tt></a> object).</dd>
</dl>
<p>The following optional parameters may be additionally
specified as keyword arguments and will be given special
treatment by the <cite>Application</cite> class logic:</p>
<dl class="docutils">
<dt><cite>requested_architecture</cite></dt>
<dd>specify that this application can only be executed on a certain
processor architecture; see <a class="reference internal" href="#gc3libs.Run.Arch" title="gc3libs.Run.Arch"><tt class="xref py py-class docutils literal"><span class="pre">Run.Arch</span></tt></a> for a list of
possible values.  The default value <cite>None</cite> means that any
architecture is valid, i.e., there are no requirements on the
processor architecture.</dd>
<dt><cite>environment</cite></dt>
<dd>a list of pairs <cite>(name, value)</cite>: the
environment variable whose name is given by the contents of
the string <cite>name</cite> will be defined as the content of string
<cite>value</cite> (i.e., as if &#8220;export name=value&#8221; was executed prior
to starting the application).  Alternately, one can pass in
a list of strings of the form &#8220;name=value&#8221;.</dd>
<dt><cite>output_base_url</cite></dt>
<dd>if not <cite>None</cite>, this is prefixed to all output files (except
stdout and stderr, which are always retrieved), so, for instance,
having <cite>output_base_url=&#8221;gsiftp://example.org/data&#8221;</cite> will upload
output files into that remote directory.</dd>
<dt><cite>stdin</cite></dt>
<dd>file name of a file whose contents will be fed as
standard input stream to the remote-executing process.</dd>
<dt><cite>stdout</cite></dt>
<dd>name of a file where the standard output stream of
the remote executing process will be redirected to; will be
automatically added to <cite>outputs</cite>.</dd>
<dt><cite>stderr</cite></dt>
<dd>name of a file where the standard error stream of
the remote executing process will be redirected to; will be
automatically added to <cite>outputs</cite>.</dd>
<dt><cite>join</cite></dt>
<dd>if this evaluates to <cite>True</cite>, then standard error is
redirected to the file specified by <cite>stdout</cite> and <cite>stderr</cite> is
ignored.  (<cite>join</cite> has no effect if <cite>stdout</cite> is not given.)</dd>
<dt><cite>tags</cite></dt>
<dd>list of tag names (string) that must be present on a
resource in order to be eligible for submission; in the ARC
backend, tags are interpreted as run-time environments (RTE) to
request.</dd>
</dl>
<p>Any other keyword arguments will be set as instance attributes,
but otherwise ignored by the <cite>Application</cite> constructor.</p>
<p>After successful construction, an <cite>Application</cite> object is
guaranteed to have the following instance attributes:</p>
<dl class="docutils">
<dt><cite>arguments</cite></dt>
<dd>list of strings specifying command-line arguments for executable
invocation. The first element must be the executable.</dd>
<dt><cite>inputs</cite></dt>
<dd>dictionary mapping source URL (a <a class="reference internal" href="#gc3libs.url.Url" title="gc3libs.url.Url"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.url.Url</span></tt></a>
object) to a remote file name (a string); remote file names are
relative paths (root directory is the remote job folder)</dd>
<dt><cite>outputs</cite></dt>
<dd>dictionary mapping remote file name (a string) to a destination
(a <a class="reference internal" href="#gc3libs.url.Url" title="gc3libs.url.Url"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.url.Url</span></tt></a>); remote file names are relative
paths (root directory is the remote job folder)</dd>
<dt><cite>output_dir</cite></dt>
<dd>Path to the base directory where output files will be
downloaded.  Output file names (those which are not URLs) are
interpreted relative to this base directory.</dd>
<dt><cite>execution</cite></dt>
<dd><blockquote class="first">
<div>a <cite>Run</cite> instance; its state attribute is initially set to <tt class="docutils literal"><span class="pre">NEW</span></tt>
(Actually inherited from the <a class="reference internal" href="#gc3libs.Task" title="gc3libs.Task"><tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt></a>)</div></blockquote>
<dl class="last docutils">
<dt><cite>environment</cite></dt>
<dd>dictionary mapping environment variable names to the requested
value (string); possibly empty</dd>
</dl>
</dd>
<dt><cite>stdin</cite></dt>
<dd><cite>None</cite> or a string specifying a (local) file name.  If <cite>stdin</cite>
is not None, then it matches a key name in <cite>inputs</cite></dd>
<dt><cite>stdout</cite></dt>
<dd><cite>None</cite> or a string specifying a (remote) file name.  If <cite>stdout</cite>
is not None, then it matches a key name in <cite>outputs</cite></dd>
<dt><cite>stderr</cite></dt>
<dd><cite>None</cite> or a string specifying a (remote) file name.  If <cite>stdout</cite>
is not None, then it matches a key name in <cite>outputs</cite></dd>
<dt><cite>join</cite></dt>
<dd>boolean value, indicating whether <cite>stdout</cite> and <cite>stderr</cite> are
collected into the same file</dd>
<dt><cite>tags</cite></dt>
<dd>list of strings specifying the tags to request in each resource
for submission; possibly empty.</dd>
</dl>
<dl class="attribute">
<dt id="gc3libs.Application.application_name">
<tt class="descname">application_name</tt><em class="property"> = 'generic'</em><a class="headerlink" href="#gc3libs.Application.application_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A name for applications of this class.</p>
<p>This string is used as a prefix for configuration items related to
this application in configured resources.  For example, if the
<cite>application_name</cite> is <tt class="docutils literal"><span class="pre">foo</span></tt>, then the application interface code
in GC3Pie might search for <tt class="docutils literal"><span class="pre">foo_cmd</span></tt>, <tt class="docutils literal"><span class="pre">foo_extra_args</span></tt>, etc.
See <a class="reference internal" href="#gc3libs.Application.qsub_sge" title="gc3libs.Application.qsub_sge"><tt class="xref py py-meth docutils literal"><span class="pre">qsub_sge()</span></tt></a> for an actual example.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.bsub">
<tt class="descname">bsub</tt><big>(</big><em>resource</em>, <em>_suppress_warning=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Application.bsub" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an LSF <tt class="docutils literal"><span class="pre">qsub</span></tt> command-line invocation for submitting an
instance of this application.  Return a pair <cite>(cmd_argv,
app_argv)</cite>, where <cite>cmd_argv</cite> is a list containing the
<em>argv</em>-vector of the command to run to submit an instance of
this application to the LSF batch system, and <cite>app_argv</cite> is
the <em>argv</em>-vector to use when invoking the application.</p>
<p>In the construction of the command-line invocation, one should
assume that all the input files (as named in <cite>Application.inputs</cite>)
have been copied to the current working directory, and that output
files should be created in this same directory.</p>
<p>The default implementation just prefixes any output from the
<cite>cmdline</cite> method with an LSF <tt class="docutils literal"><span class="pre">bsub</span></tt> invocation of the form
<tt class="docutils literal"><span class="pre">bsub</span> <span class="pre">-cwd</span> <span class="pre">.</span> <span class="pre">-L</span> <span class="pre">/bin/sh</span></tt> + resource limits.</p>
<p>Override this method in application-specific classes to
provide appropriate invocation templates and/or add
resource-specific submission options.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.cmdline">
<tt class="descname">cmdline</tt><big>(</big><em>resource</em><big>)</big><a class="headerlink" href="#gc3libs.Application.cmdline" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of command-line arguments for invoking the application.</p>
<p>This is exactly the <em>argv</em>-vector of the application process:
the application command name is included as first item (index
0) of the list, further items are command-line arguments.</p>
<p>Hence, to get a UNIX shell command-line, just concatenate the
elements of the list, separating them with spaces.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.compatible_resources">
<tt class="descname">compatible_resources</tt><big>(</big><em>resources</em><big>)</big><a class="headerlink" href="#gc3libs.Application.compatible_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of compatible resources.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.fetch_output_error">
<tt class="descname">fetch_output_error</tt><big>(</big><em>ex</em><big>)</big><a class="headerlink" href="#gc3libs.Application.fetch_output_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Invocation of <cite>Core.fetch_output()</cite> on this object failed;
<cite>ex</cite> is the <cite>Exception</cite> that describes the error.</p>
<p>If this method returns an exception object, that is raised as
a result of the <cite>Core.fetch_output()</cite>, otherwise the return
value is ignored and <cite>Core.fetch_output</cite> returns <cite>None</cite>.</p>
<p>Default is to return <cite>ex</cite> unchanged; override in derived classes
to change this behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.qsub_pbs">
<tt class="descname">qsub_pbs</tt><big>(</big><em>resource</em>, <em>_suppress_warning=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Application.qsub_pbs" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <cite>qsub_sge()</cite>, but for the PBS/TORQUE resource manager.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.qsub_sge">
<tt class="descname">qsub_sge</tt><big>(</big><em>resource</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Application.qsub_sge" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an SGE <tt class="docutils literal"><span class="pre">qsub</span></tt> command-line invocation for submitting an
instance of this application.</p>
<p>Return a pair <cite>(cmd_argv, app_argv)</cite>.  Both <cite>cmd_argv</cite> and
<cite>app_argv</cite> are <em>argv</em>-lists: the command name is included as
first item (index 0) of the list, further items are
command-line arguments; <cite>cmd_argv</cite> is the <em>argv</em>-list for the
submission command (excluding the actual application command
part); <cite>app_argv</cite> is the <em>argv</em>-list for invoking the
application.  By overriding this method, one can add futher
resource-specific options at the end of the <cite>cmd_argv</cite>
<em>argv</em>-list.</p>
<p>In the construction of the command-line invocation, one should
assume that all the input files (as named in <cite>Application.inputs</cite>)
have been copied to the current working directory, and that output
files should be created in this same directory.</p>
<p>The default implementation just prefixes any output from the
<cite>cmdline</cite> method with an SGE <tt class="docutils literal"><span class="pre">qsub</span></tt> invocation of the form
<tt class="docutils literal"><span class="pre">qsub</span> <span class="pre">-cwd</span> <span class="pre">-S</span> <span class="pre">/bin/sh</span></tt> + resource limits.  Note that
<em>there is no generic way of requesting a certain number of cores</em>
in SGE: it all depends on the installed parallel environment, and
these are totally under control of the local sysadmin;
therefore, any request for cores is ignored and a warning is
logged.</p>
<p>Override this method in application-specific classes to
provide appropriate invocation templates and/or add different
submission options.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.rank_resources">
<tt class="descname">rank_resources</tt><big>(</big><em>resources</em><big>)</big><a class="headerlink" href="#gc3libs.Application.rank_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the given resources in order of preference.</p>
<p>By default, less-loaded resources come first;
see <cite>_cmp_resources</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.sbatch">
<tt class="descname">sbatch</tt><big>(</big><em>resource</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Application.sbatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a SLURM <tt class="docutils literal"><span class="pre">sbatch</span></tt> command-line invocation for submitting an
instance of this application.</p>
<p>Return a pair <cite>(cmd_argv, app_argv)</cite>.  Both <cite>cmd_argv</cite> and
<cite>app_argv</cite> are <em>argv</em>-lists: the command name is included as
first item (index 0) of the list, further items are
command-line arguments; <cite>cmd_argv</cite> is the <em>argv</em>-list for the
submission command (excluding the actual application command
part); <cite>app_argv</cite> is the <em>argv</em>-list for invoking the
application.  By overriding this method, one can add futher
resource-specific options at the end of the <cite>cmd_argv</cite>
<em>argv</em>-list.</p>
<p>In the construction of the command-line invocation, one should
assume that all the input files (as named in <cite>Application.inputs</cite>)
have been copied to the current working directory, and that output
files should be created in this same directory.</p>
<p>Override this method in application-specific classes to
provide appropriate invocation templates and/or add different
submission options.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.submit_error">
<tt class="descname">submit_error</tt><big>(</big><em>exs</em><big>)</big><a class="headerlink" href="#gc3libs.Application.submit_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Invocation of <cite>Core.submit()</cite> on this object failed;
<cite>exs</cite> is a list of <cite>Exception</cite> objects, one for each attempted
submission.</p>
<p>If this method returns an exception object, that is raised as
a result of the <cite>Core.submit()</cite>, otherwise the return value is
ignored and <cite>Core.submit</cite> returns <cite>None</cite>.</p>
<p>Default is to always return the first exception in the list
(on the assumption that it is the root of all exceptions or
that at least it refers to the preferred resource).  Override
in derived classes to change this behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.update_job_state_error">
<tt class="descname">update_job_state_error</tt><big>(</big><em>ex</em><big>)</big><a class="headerlink" href="#gc3libs.Application.update_job_state_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle exceptions that occurred during a <cite>Core.update_job_state</cite> call.</p>
<p>If this method returns an exception object, that exception is
processed in <cite>Core.update_job_state()</cite> instead of the original
one.  Any other return value is ignored and
<cite>Core.update_job_state</cite> proceeds as if no exception had
happened.</p>
<p>Argument <cite>ex</cite> is the exception that was raised by the backend
during job state update.</p>
<p>Default is to return <cite>ex</cite> unchanged; override in derived
classes to change this behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Application.xrsl">
<tt class="descname">xrsl</tt><big>(</big><em>resource</em><big>)</big><a class="headerlink" href="#gc3libs.Application.xrsl" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string containing an xRSL sequence, suitable for
submitting an instance of this application through ARC&#8217;s
<tt class="docutils literal"><span class="pre">ngsub</span></tt> command.</p>
<p>The default implementation produces XRSL content based on
the construction parameters; you should override this method
to produce XRSL tailored to your application.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">WARNING: ARClib SWIG bindings cannot resolve the overloaded
constructor if the xRSL string argument is a Python &#8216;unicode&#8217;
object; if you overload this method, force the result to be
a &#8216;str&#8217;!</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.Default">
<em class="property">class </em><tt class="descclassname">gc3libs.</tt><tt class="descname">Default</tt><a class="headerlink" href="#gc3libs.Default" title="Permalink to this definition">¶</a></dt>
<dd><p>A namespace for all constants and default values used in the
GC3Libs package.</p>
<dl class="attribute">
<dt id="gc3libs.Default.ARC_CACHE_TIME">
<tt class="descname">ARC_CACHE_TIME</tt><em class="property"> = 30</em><a class="headerlink" href="#gc3libs.Default.ARC_CACHE_TIME" title="Permalink to this definition">¶</a></dt>
<dd><p>only update ARC resources status every this seconds</p>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Default.ARC_LOST_JOB_TIMEOUT">
<tt class="descname">ARC_LOST_JOB_TIMEOUT</tt><em class="property"> = 120</em><a class="headerlink" href="#gc3libs.Default.ARC_LOST_JOB_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>consider a submitted job lost if it does not show up in the information system after this duration</p>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Default.PROXY_VALIDITY_THRESHOLD">
<tt class="descname">PROXY_VALIDITY_THRESHOLD</tt><em class="property"> = 600</em><a class="headerlink" href="#gc3libs.Default.PROXY_VALIDITY_THRESHOLD" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy validity threshold in seconds. If proxy is expiring before the thresold, it will be marked as to be renewed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.Run">
<em class="property">class </em><tt class="descclassname">gc3libs.</tt><tt class="descname">Run</tt><big>(</big><em>initializer=None</em>, <em>attach=None</em>, <em>**keywd</em><big>)</big><a class="headerlink" href="#gc3libs.Run" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialized <cite>dict</cite>-like object that keeps information about
the execution state of an <cite>Application</cite> instance.</p>
<p>A <cite>Run</cite> object is guaranteed to have the following attributes:</p>
<blockquote>
<div><dl class="docutils">
<dt><cite>log</cite></dt>
<dd>A <cite>gc3libs.utils.History</cite> instance, recording human-readable text
messages on events in this job&#8217;s history.</dd>
<dt><cite>info</cite></dt>
<dd>A simplified interface for reading/writing messages to
<cite>Run.log</cite>.  Reading from the <cite>info</cite> attribute returns the last
message appended to <cite>log</cite>.  Writing into <cite>info</cite> appends a
message to <cite>log</cite>.</dd>
<dt><cite>timestamp</cite></dt>
<dd>Dictionary, recording the most recent timestamp when a certain
state was reached.  Timestamps are given as UNIX epochs.</dd>
</dl>
</div></blockquote>
<p>For properties <cite>state</cite>, <cite>signal</cite> and <cite>returncode</cite>, see the
respective documentation.</p>
<p><cite>Run</cite> objects support attribute lookup by both the <tt class="docutils literal"><span class="pre">[...]</span></tt> and
the <tt class="docutils literal"><span class="pre">.</span></tt> syntax; see <cite>gc3libs.utils.Struct</cite> for examples.</p>
<dl class="class">
<dt id="gc3libs.Run.Arch">
<em class="property">class </em><tt class="descname">Arch</tt><a class="headerlink" href="#gc3libs.Run.Arch" title="Permalink to this definition">¶</a></dt>
<dd><p>Processor architectures, for use as values in the
<cite>requested_architecture</cite> field of the <cite>Application</cite> class
constructor.</p>
<p>The following values are currently defined:</p>
<dl class="docutils">
<dt><cite>X86_64</cite></dt>
<dd>64-bit Intel/AMD/VIA x86 processors in 64-bit mode.</dd>
<dt><cite>X86_32</cite></dt>
<dd>32-bit Intel/AMD/VIA x86 processors in 32-bit mode.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Run.exitcode">
<tt class="descclassname">Run.</tt><tt class="descname">exitcode</tt><a class="headerlink" href="#gc3libs.Run.exitcode" title="Permalink to this definition">¶</a></dt>
<dd><p>The &#8220;exit code&#8221; part of a <cite>Run.returncode</cite>, see <cite>os.WEXITSTATUS</cite>.
This is an 8-bit integer, whose meaning is entirely
application-specific.  (However, the value <cite>255</cite> is often used
to mean that an error has occurred and the application could
not end its execution normally.)</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Run.in_state">
<tt class="descclassname">Run.</tt><tt class="descname">in_state</tt><big>(</big><em>*names</em><big>)</big><a class="headerlink" href="#gc3libs.Run.in_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>True</cite> if the <cite>Run</cite> state matches any of the given names.</p>
<p>In addition to the states from <tt class="xref py py-class docutils literal"><span class="pre">Run.State</span></tt>, the two
additional names <tt class="docutils literal"><span class="pre">ok</span></tt> and <tt class="docutils literal"><span class="pre">failed</span></tt> are also accepted, with
the following meaning:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ok</span></tt>: state is <cite>TERMINATED</cite> and <cite>returncode</cite> is 0.</li>
<li><tt class="docutils literal"><span class="pre">failed</span></tt>: state is <cite>TERMINATED</cite> and <cite>returncode</cite> is non-zero.</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Run.info">
<tt class="descclassname">Run.</tt><tt class="descname">info</tt><a class="headerlink" href="#gc3libs.Run.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A simplified interface for reading/writing entries into <cite>history</cite>.</p>
<p>Setting the <cite>info</cite> attribute appends a message to the log:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span> <span class="o">=</span> <span class="n">Run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="s">&#39;a message&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="s">&#39;a second message&#39;</span>
</pre></div>
</div>
<p>Getting the value of the <cite>info</cite> attribute returns the last
message entered in the log:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="o">.</span><span class="n">info</span> 
<span class="go">u&#39;a second message ...&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Run.returncode">
<tt class="descclassname">Run.</tt><tt class="descname">returncode</tt><a class="headerlink" href="#gc3libs.Run.returncode" title="Permalink to this definition">¶</a></dt>
<dd><p>The <cite>returncode</cite> attribute of this job object encodes the
<cite>Run</cite> termination status in a manner compatible with the POSIX
termination status as implemented by <cite>os.WIFSIGNALED</cite> and
<cite>os.WIFEXITED</cite>.</p>
<p>However, in contrast with POSIX usage, the <cite>exitcode</cite> and the
<cite>signal</cite> part can <em>both</em> be significant: in case a Grid
middleware error happened <em>after</em> the application has
successfully completed its execution.  In other words,
<cite>os.WEXITSTATUS(returncode)</cite> is meaningful iff
<cite>os.WTERMSIG(returncode)</cite> is 0 or one of the pseudo-signals
listed in <cite>Run.Signals</cite>.</p>
<p><cite>Run.exitcode</cite> and <cite>Run.signal</cite> are combined to form the
return code 16-bit integer as follows (the convention appears
to be obeyed on every known system):</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Bit</th>
<th class="head">Encodes...</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0..7</td>
<td>signal number</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>1 if program dumped core.</td>
</tr>
<tr class="row-even"><td>9..16</td>
<td>exit code</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><em>Note:</em> the &#8220;core dump bit&#8221; is always 0 here.</p>
<p>Setting the <cite>returncode</cite> property sets <cite>exitcode</cite> and
<cite>signal</cite>; you can either assign a <cite>(signal, exitcode)</cite> pair to
<cite>returncode</cite>, or set <cite>returncode</cite> to an integer from which the
correct <cite>exitcode</cite> and <cite>signal</cite> attribute values are
extracted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">Run</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">returncode</span> <span class="o">=</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">56</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">signal</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">exitcode</span>
<span class="go">56</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">returncode</span> <span class="o">=</span> <span class="mi">137</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">signal</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">exitcode</span>
<span class="go">0</span>
</pre></div>
</div>
<p>See also <cite>Run.exitcode</cite> and <cite>Run.signal</cite>.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="gc3libs.Run.shellexit_to_returncode">
<em class="property">static </em><tt class="descclassname">Run.</tt><tt class="descname">shellexit_to_returncode</tt><big>(</big><em>rc</em><big>)</big><a class="headerlink" href="#gc3libs.Run.shellexit_to_returncode" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a shell exit code to a POSIX process return code.</p>
<p>A POSIX shell represents the return code of the last-run
program within its exit code as follows:</p>
<ul class="simple">
<li>If the program was terminated by signal <cite>N</cite>, the shell exits
with code 128+N,</li>
<li>otherwise, if the program terminated with exit code C, the
shell exits with code C.</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Run.signal">
<tt class="descclassname">Run.</tt><tt class="descname">signal</tt><a class="headerlink" href="#gc3libs.Run.signal" title="Permalink to this definition">¶</a></dt>
<dd><p>The &#8220;signal number&#8221; part of a <cite>Run.returncode</cite>, see
<cite>os.WTERMSIG</cite> for details.</p>
<p>The &#8220;signal number&#8221; is a 7-bit integer value in the range
0..127; value <cite>0</cite> is used to mean that no signal has been
received during the application runtime (i.e., the application
terminated by calling <tt class="docutils literal"><span class="pre">exit()</span></tt>).</p>
<p>The value represents either a real UNIX system signal, or a
&#8220;fake&#8221; one that GC3Libs uses to represent Grid middleware
errors (see <cite>Run.Signals</cite>).</p>
</dd></dl>

<dl class="attribute">
<dt id="gc3libs.Run.state">
<tt class="descclassname">Run.</tt><tt class="descname">state</tt><a class="headerlink" href="#gc3libs.Run.state" title="Permalink to this definition">¶</a></dt>
<dd><p>The state a <cite>Run</cite> is in.</p>
<p>The value of <cite>Run.state</cite> must always be a value from the
<cite>Run.State</cite> enumeration, i.e., one of the following values.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="63%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Run.State value</th>
<th class="head">purpose</th>
<th class="head">can change to</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>NEW</td>
<td>Job has not yet been submitted/started (i.e., gsub not called)</td>
<td>SUBMITTED (by gsub)</td>
</tr>
<tr class="row-odd"><td>SUBMITTED</td>
<td>Job has been sent to execution resource</td>
<td>RUNNING, STOPPED</td>
</tr>
<tr class="row-even"><td>STOPPED</td>
<td>Trap state: job needs manual intervention (either user-
or sysadmin-level) to resume normal execution</td>
<td>TERMINATING(by gkill),
SUBMITTED (by miracle)</td>
</tr>
<tr class="row-odd"><td>RUNNING</td>
<td>Job is executing on remote resource</td>
<td>TERMINATING</td>
</tr>
<tr class="row-even"><td>TERMINATING</td>
<td>Job has finished execution on remote resource;
output not yet retrieved</td>
<td>TERMINATED</td>
</tr>
<tr class="row-odd"><td>TERMINATED</td>
<td>Job execution is finished (correctly or not)
and will not be resumed; output has been retrieved</td>
<td>None: final state</td>
</tr>
</tbody>
</table>
<p>When a <a class="reference internal" href="#gc3libs.Run" title="gc3libs.Run"><tt class="xref py py-class docutils literal"><span class="pre">Run</span></tt></a> object is first created, it is assigned
the state NEW.  After a successful invocation of
<cite>Core.submit()</cite>, it is transitioned to state SUBMITTED.
Further transitions to RUNNING or STOPPED or TERMINATED state,
happen completely independently of the creator progra; the
<cite>Core.update_job_state()</cite> call provides updates on the status
of a job.</p>
<p>The STOPPED state is a kind of generic &#8220;run time error&#8221; state:
a job can get into the STOPPED state if its execution is
stopped (e.g., a SIGSTOP is sent to the remote process) or
delayed indefinitely (e.g., the remote batch system puts the
job &#8220;on hold&#8221;). There is no way a job can get out of the
STOPPED state automatically: all transitions from the STOPPED
state require manual intervention, either by the submitting
user (e.g., cancel the job), or by the remote systems
administrator (e.g., by releasing the hold).</p>
<p>The TERMINATED state is the final state of a job: once a job
reaches it, it cannot get back to any other state. Jobs reach
TERMINATED state regardless of their exit code, or even if a
system failure occurred during remote execution; actually,
jobs can reach the TERMINATED status even if they didn&#8217;t run
at all, for example, in case of a fatal failure during the
submission step.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.Task">
<em class="property">class </em><tt class="descclassname">gc3libs.</tt><tt class="descname">Task</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix-in class implementing a facade for job control.</p>
<p>A <cite>Task</cite> can be described as an &#8220;active&#8221; job, in the sense that
all job control is done through methods on the <cite>Task</cite> instance
itself; contrast this with operating on <cite>Application</cite> objects
through a <cite>Core</cite> or <cite>Engine</cite> instance.</p>
<p>The following pseudo-code is an example of the usage of the <cite>Task</cite>
interface for controlling a job.  Assume that <cite>GamessApplication</cite> is
inheriting from <cite>Task</cite> (it actually is):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">GamessApplication</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
<span class="c"># ... do other stuff</span>
<span class="n">t</span><span class="o">.</span><span class="n">update_state</span><span class="p">()</span>
<span class="c"># ... take decisions based on t.execution.state</span>
<span class="n">t</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span> <span class="c"># blocks until task is terminated</span>
</pre></div>
</div>
<p>Each <cite>Task</cite> object has an <cite>execution</cite> attribute: it is an instance
of class <a class="reference internal" href="#gc3libs.Run" title="gc3libs.Run"><tt class="xref py py-class docutils literal"><span class="pre">Run</span></tt></a>, initialized with a new instance of <cite>Run</cite>,
and at any given time it reflects the current status of the
associated remote job.  In particular, <cite>execution.state</cite> can be
checked for the current task status.</p>
<p>After successful initialization, a <cite>Task</cite> instance will have the
following attributes:</p>
<dl class="docutils">
<dt><cite>changed</cite></dt>
<dd>evaluates to <cite>True</cite> if the <cite>Task</cite> has been changed since last
time it has been saved to persistent storage (see
<tt class="xref py py-mod docutils literal"><span class="pre">gclibs.persistence</span></tt>)</dd>
<dt><cite>execution</cite></dt>
<dd>a <cite>Run</cite> instance; its state attribute is initially set to <tt class="docutils literal"><span class="pre">NEW</span></tt>.</dd>
</dl>
<dl class="method">
<dt id="gc3libs.Task.attach">
<tt class="descname">attach</tt><big>(</big><em>controller</em><big>)</big><a class="headerlink" href="#gc3libs.Task.attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the given Grid interface for operations on the job
associated with this task.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.detach">
<tt class="descname">detach</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.detach" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any reference to the current grid interface.  After
this, calling any method other than <a class="reference internal" href="#gc3libs.Task.attach" title="gc3libs.Task.attach"><tt class="xref py py-meth docutils literal"><span class="pre">attach()</span></tt></a> results in
an exception <tt class="xref py py-class docutils literal"><span class="pre">TaskDetachedFromGridError</span></tt> being thrown.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.fetch_output">
<tt class="descname">fetch_output</tt><big>(</big><em>output_dir=None</em>, <em>overwrite=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.fetch_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the outputs of the computational job associated with
this task into directory <cite>output_dir</cite>, or, if that is <cite>None</cite>,
into the directory whose path is stored in instance attribute
<cite>.output_dir</cite>.</p>
<p>If the execution state is <cite>TERMINATING</cite>, transition the state to
<cite>TERMINATED</cite> (which runs the appropriate hook).</p>
<p>See <tt class="xref py py-meth docutils literal"><span class="pre">gc3libs.Core.fetch_output()</span></tt> for a full explanation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Path to the directory where the job output has been
collected.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.free">
<tt class="descname">free</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Release any remote resources associated with this task.</p>
<p>See <tt class="xref py py-meth docutils literal"><span class="pre">gc3libs.Core.free()</span></tt> for a full explanation.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.kill">
<tt class="descname">kill</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the computational job associated with this task.</p>
<p>See <tt class="xref py py-meth docutils literal"><span class="pre">gc3libs.Core.kill()</span></tt> for a full explanation.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.new">
<tt class="descname">new</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.new" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state is (re)set to <cite>NEW</cite>.</p>
<p>Note this will not be called when the application object is
created, rather if the state is reset to <cite>NEW</cite> after it has
already been submitted.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.peek">
<tt class="descname">peek</tt><big>(</big><em>what='stdout'</em>, <em>offset=0</em>, <em>size=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
the associated job standard output or error stream, and write them
into a local file.  Return a file-like object from which the
downloaded contents can be read.</p>
<p>See <tt class="xref py py-meth docutils literal"><span class="pre">gc3libs.Core.peek()</span></tt> for a full explanation.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.progress">
<tt class="descname">progress</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Advance the associated job through all states of a regular
lifecycle. In detail:</p>
<blockquote>
<div><ol class="arabic simple">
<li>If <cite>execution.state</cite> is <cite>NEW</cite>, the associated job is started.</li>
<li>The state is updated until it reaches <cite>TERMINATED</cite></li>
<li>Output is collected and the final returncode is returned.</li>
</ol>
</div></blockquote>
<p>An exception <cite>TaskError</cite> is raised if the job hits state
<cite>STOPPED</cite> or <cite>UNKNOWN</cite> during an update in phase 2.</p>
<p>When the job reaches <cite>TERMINATING</cite> state, the output is
retrieved; if this operation is successfull, state is advanced
to <cite>TERMINATED</cite>.</p>
<p>oNCE the job reaches <cite>TERMINATED</cite> state, the return code
(stored also in <cite>.returncode</cite>) is returned; if the job is not
yet in <cite>TERMINATED</cite> state, calling <cite>progress</cite> returns <cite>None</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body">exception <tt class="xref py py-class docutils literal"><span class="pre">UnexpectedStateError</span></tt> if the
associated job goes into state <cite>STOPPED</cite> or <cite>UNKNOWN</cite></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">final returncode, or <cite>None</cite> if the execution
state is not <cite>TERMINATED</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.running">
<tt class="descname">running</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.running" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>RUNNING</cite>, i.e., the
job has been successfully started on a (possibly) remote
resource.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.stopped">
<tt class="descname">stopped</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.stopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>STOPPED</cite>, i.e., the
job has been remotely suspended for an unknown reason and
cannot automatically resume execution.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.submit">
<tt class="descname">submit</tt><big>(</big><em>resubmit=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the computational job associated with this <cite>Task</cite> instance.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.submitted">
<tt class="descname">submitted</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.submitted" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>SUBMITTED</cite>, i.e.,
the job has been successfully sent to a (possibly) remote
execution resource and is now waiting to be scheduled.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.terminated">
<tt class="descname">terminated</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.terminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>TERMINATED</cite>, i.e.,
the job has finished execution (with whatever exit status, see
<cite>returncode</cite>) and the final output has been retrieved.</p>
<p>The location where the final output has been stored is
available in attribute <cite>self.output_dir</cite>.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.terminating">
<tt class="descname">terminating</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.terminating" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>TERMINATING</cite>, i.e.,
the remote job has finished execution (with whatever exit
status, see <cite>returncode</cite>) but output has not yet been
retrieved.</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.unknown">
<tt class="descname">unknown</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.Task.unknown" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the job state transitions to <cite>UNKNOWN</cite>, i.e.,
the job has not been updated for a certain period of time
thus it is placed in UNKNOWN state.</p>
<p>Two possible ways of changing from this state:
1) next update cycle, job status is updated from the remote
server
2) derive this method for Application specific logic to deal
with this case</p>
<p>The default implementation does nothing, override in derived
classes to implement additional behavior.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.update_state">
<tt class="descname">update_state</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.Task.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>In-place update of the execution state of the computational
job associated with this <cite>Task</cite>.  After successful completion,
<cite>.execution.state</cite> will contain the new state.</p>
<p>After the job has reached the <cite>TERMINATING</cite> state, the following
attributes are also set:</p>
<dl class="docutils">
<dt><cite>execution.duration</cite></dt>
<dd>Time lapse from start to end of the job at the remote
execution site, as a <a class="reference internal" href="#gc3libs.quantity.Duration" title="gc3libs.quantity.Duration"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.quantity.Duration</span></tt></a> value.
(This is also often referred to as the &#8216;wall-clock time&#8217; or
<a class="reference internal" href="../glossary.html#term-walltime"><em class="xref std std-term">walltime</em></a> of the job.)</dd>
<dt><cite>execution.max_used_memory</cite></dt>
<dd>Maximum amount of RAM used during job execution, represented
as a <a class="reference internal" href="#gc3libs.quantity.Memory" title="gc3libs.quantity.Memory"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.quantity.Memory</span></tt></a> value.</dd>
<dt><cite>execution.used_cpu_time</cite></dt>
<dd>Total time (as a <a class="reference internal" href="#gc3libs.quantity.Duration" title="gc3libs.quantity.Duration"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.quantity.Duration</span></tt></a> value) that the
processors has been actively executing the job&#8217;s code.</dd>
</dl>
<p>The execution backend may set additional attributes; the exact
name and format of these additional attributes is
backend-specific.  However, you can easily identify the
backend-specific attributes because their name is prefixed
with the (lowercased) backend name; for instance, the
<tt class="xref py py-class docutils literal"><span class="pre">PbsLrms</span></tt> backend sets attributes <cite>pbs_queue</cite>,
<cite>pbs_end_time</cite>, etc.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.Task.wait">
<tt class="descname">wait</tt><big>(</big><em>interval=60</em><big>)</big><a class="headerlink" href="#gc3libs.Task.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until the associated job has reached <cite>TERMINATED</cite> state,
then return the job&#8217;s return code.  Note that this does not
automatically fetch the output.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>interval</strong> (<em>integer</em>) &#8211; Poll job state every this number of seconds</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.configure_logger">
<tt class="descclassname">gc3libs.</tt><tt class="descname">configure_logger</tt><big>(</big><em>level=40</em>, <em>name=None</em>, <em>format='sphinx-build: [%(asctime)s] %(levelname)-8s: %(message)s'</em>, <em>datefmt='%Y-%m-%d %H:%M:%S'</em><big>)</big><a class="headerlink" href="#gc3libs.configure_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <tt class="docutils literal"><span class="pre">gc3.gc3libs</span></tt> logger.</p>
<p>Arguments <cite>level</cite>, <cite>format</cite> and <cite>datefmt</cite> set the corresponding
arguments in the <cite>logging.basicConfig()</cite> call.</p>
<p>If a user configuration file exists in file NAME.log.conf in the
<tt class="docutils literal"><span class="pre">Default.RCDIR</span></tt> directory (usually <tt class="docutils literal"><span class="pre">~/.gc3</span></tt>), it is read and
used for more advanced configuration; if it does not exist, then a
sample one is created.</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.cmdline">
<span id="gc3libs-cmdline"></span><h2><cite>gc3libs.cmdline</cite><a class="headerlink" href="#module-gc3libs.cmdline" title="Permalink to this headline">¶</a></h2>
<p>Prototype classes for GC3Libs-based scripts.</p>
<p>Classes implemented in this file provide common and recurring
functionality for GC3Libs command-line utilities and scripts.  User
applications should implement their specific behavior by subclassing
and overriding a few customization methods.</p>
<p>There are currently two public classes provided here:</p>
<dl class="docutils">
<dt><a class="reference internal" href="#gc3libs.cmdline.GC3UtilsScript" title="gc3libs.cmdline.GC3UtilsScript"><tt class="xref py py-class docutils literal"><span class="pre">GC3UtilsScript</span></tt></a></dt>
<dd>Base class for all the GC3Utils commands. Implements a few methods
useful for writing command-line scripts that operate on jobs by ID.</dd>
<dt><a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript" title="gc3libs.cmdline.SessionBasedScript"><tt class="xref py py-class docutils literal"><span class="pre">SessionBasedScript</span></tt></a></dt>
<dd>Base class for the <tt class="docutils literal"><span class="pre">grosetta</span></tt>/<tt class="docutils literal"><span class="pre">ggamess</span></tt>/<tt class="docutils literal"><span class="pre">gcodeml</span></tt> scripts.
Implements a long-running script to submit and manage a large number
of jobs grouped into a &#8220;session&#8221;.</dd>
</dl>
<dl class="class">
<dt id="gc3libs.cmdline.GC3UtilsScript">
<em class="property">class </em><tt class="descclassname">gc3libs.cmdline.</tt><tt class="descname">GC3UtilsScript</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.GC3UtilsScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for GC3Utils scripts.</p>
<p>The default command line implemented is the following:</p>
<blockquote>
<div>script [options] JOBID [JOBID ...]</div></blockquote>
<p>By default, only the standard options <tt class="docutils literal"><span class="pre">-h</span></tt>/<tt class="docutils literal"><span class="pre">--help</span></tt> and
<tt class="docutils literal"><span class="pre">-V</span></tt>/<tt class="docutils literal"><span class="pre">--version</span></tt> are considered; to add more, override
<tt class="xref py py-meth docutils literal"><span class="pre">setup_options()</span></tt>
To change default positional argument parsing, override
<a class="reference internal" href="#gc3libs.cmdline.GC3UtilsScript.setup_args" title="gc3libs.cmdline.GC3UtilsScript.setup_args"><tt class="xref py py-meth docutils literal"><span class="pre">setup_args()</span></tt></a></p>
<dl class="method">
<dt id="gc3libs.cmdline.GC3UtilsScript.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.GC3UtilsScript.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform parsing of standard command-line options and call into
<cite>parse_args()</cite> to do non-optional argument processing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.GC3UtilsScript.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.GC3UtilsScript.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup standard command-line parsing.</p>
<p>GC3Utils scripts should probably override <a class="reference internal" href="#gc3libs.cmdline.GC3UtilsScript.setup_args" title="gc3libs.cmdline.GC3UtilsScript.setup_args"><tt class="xref py py-meth docutils literal"><span class="pre">setup_args()</span></tt></a>
and <tt class="xref py py-meth docutils literal"><span class="pre">setup_options()</span></tt> to modify command-line parsing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.GC3UtilsScript.setup_args">
<tt class="descname">setup_args</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.GC3UtilsScript.setup_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up command-line argument parsing.</p>
<p>The default command line parsing considers every argument as a
job ID; actual processing of the IDs is done in
<tt class="xref py py-meth docutils literal"><span class="pre">parse_args()</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.cmdline.SessionBasedScript">
<em class="property">class </em><tt class="descclassname">gc3libs.cmdline.</tt><tt class="descname">SessionBasedScript</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for <tt class="docutils literal"><span class="pre">grosetta</span></tt>/<tt class="docutils literal"><span class="pre">ggamess</span></tt>/<tt class="docutils literal"><span class="pre">gcodeml</span></tt> and like scripts.
Implements a long-running script to submit and manage a large number
of jobs grouped into a &#8220;session&#8221;.</p>
<p>The generic scripts implements a command-line like the following:</p>
<div class="highlight-python"><pre>PROG [options] INPUT [INPUT ...]</pre>
</div>
<p>First, the script builds a list of input files by recursively
scanning each of the given INPUT arguments for files matching the
<cite>self.input_file_pattern</cite> glob string (you can set it via a
keyword argument to the ctor).  To perform a different treatment
of the command-line arguments, override the
<a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.process_args" title="gc3libs.cmdline.SessionBasedScript.process_args"><tt class="xref py py-meth docutils literal"><span class="pre">process_args()</span></tt></a> method.</p>
<p>Then, new jobs are added to the session, based on the results of
the <cite>process_args()</cite> method above.  For each tuple of items
returned by <cite>process_args()</cite>, an instance of class
<cite>self.application</cite> (which you can set by a keyword argument to the
ctor) is created, passing it the tuple as init args, and added to
the session.</p>
<p>The script finally proceeds to updating the status of all jobs in
the session, submitting new ones and retrieving output as needed.
When all jobs are done, the method <tt class="xref py py-meth docutils literal"><span class="pre">done()</span></tt> is called,
and its return value is used as the script&#8217;s exit code.</p>
<p>The script&#8217;s exitcode tracks job status, in the following way.
The exitcode is a bitfield; only the 4 least-significant bits
are used, with the following meaning:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Bit</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>Set if a fatal error occurred: the script could not complete</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>Set if there are jobs in <cite>FAILED</cite> state</td>
</tr>
<tr class="row-even"><td>2</td>
<td>Set if there are jobs in <cite>RUNNING</cite> or <cite>SUBMITTED</cite> state</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>Set if there are jobs in <cite>NEW</cite> state</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>This boils down to the following rules:</dt>
<dd><ul class="first last simple">
<li>exitcode == 0: all jobs terminated successfully, no further action</li>
<li>exitcode == 1: an error interrupted script execution</li>
<li>exitcode == 2: all jobs terminated, not all of them successfully</li>
<li>exitcode &gt; 3: run the script again to progress jobs</li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.after_main_loop">
<tt class="descname">after_main_loop</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.after_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook executed after exit from the main loop.</p>
<p>This is called after the main loop has exited (for whatever
reason), but <em>before</em> the session is finally saved and other
connections are finalized.</p>
<p>Override in subclasses to plug any behavior here; the default
implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.before_main_loop">
<tt class="descname">before_main_loop</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.before_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook executed before entering the scripts&#8217; main loop.</p>
<p>This is the last chance to alter the script state as it will
be seen by the main loop.</p>
<p>Override in subclasses to plug any behavior here; the default
implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.every_main_loop">
<tt class="descname">every_main_loop</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.every_main_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook executed during each round of the main loop.</p>
<p>This is called from within the main loop, after progressing
all tasks.</p>
<p>Override in subclasses to plug any behavior here; the default
implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.make_directory_path">
<tt class="descname">make_directory_path</tt><big>(</big><em>pathspec</em>, <em>jobname</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.make_directory_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path to a directory, suitable for storing the output
of a job (named after <cite>jobname</cite>).  It is not required that the
returned path points to an existing directory.</p>
<p>This is called by the default <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.process_args" title="gc3libs.cmdline.SessionBasedScript.process_args"><tt class="xref py py-meth docutils literal"><span class="pre">process_args()</span></tt></a> using
<cite>self.params.output</cite> (i.e., the argument to the
<tt class="docutils literal"><span class="pre">-o</span></tt>/<tt class="docutils literal"><span class="pre">--output</span></tt> option) as <cite>pathspec</cite>, and <cite>jobname</cite> and
<cite>args</cite> exactly as returned by <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.new_tasks" title="gc3libs.cmdline.SessionBasedScript.new_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">new_tasks()</span></tt></a></p>
<p>The default implementation substitutes the following strings
within <cite>pathspec</cite>:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">SESSION</span></tt> is replaced with the name of the current session
(as specified by the <tt class="docutils literal"><span class="pre">-s</span></tt>/<tt class="docutils literal"><span class="pre">--session</span></tt> command-line option)
with a suffix <tt class="docutils literal"><span class="pre">.out</span></tt> appended;</li>
<li><tt class="docutils literal"><span class="pre">NAME</span></tt> is replaced with <cite>jobname</cite>;</li>
<li><tt class="docutils literal"><span class="pre">DATE</span></tt> is replaced with the current date, in <em>YYYY-MM-DD</em> format;</li>
<li><tt class="docutils literal"><span class="pre">TIME</span></tt> is replaced with the current time, in <em>HH:MM</em> format.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.make_task_controller">
<tt class="descname">make_task_controller</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.make_task_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a &#8216;Controller&#8217; object to be used for progressing tasks
and getting statistics.  In detail, a good &#8216;Controller&#8217; object
has to implement <cite>progress</cite> and <cite>stats</cite> methods with the same
interface as <cite>gc3libs.core.Engine</cite>.</p>
<p>By the time this method is called (from <tt class="xref py py-meth docutils literal"><span class="pre">_main()</span></tt>), the
following instance attributes are already defined:</p>
<ul class="simple">
<li><cite>self._core</cite>: a <cite>gc3libs.core.Core</cite> instance;</li>
<li><cite>self.session</cite>: the <cite>gc3libs.session.Session</cite> instance
that should be used to save/load jobs</li>
</ul>
<p>In addition, any other attribute created during initialization
and command-line parsing is of course available.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.new_tasks">
<tt class="descname">new_tasks</tt><big>(</big><em>extra</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.new_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over jobs that should be added to the current session.
Each item yielded must have the form <cite>(jobname, cls, args,
kwargs)</cite>, where:</p>
<ul class="simple">
<li><cite>jobname</cite> is a string uniquely identifying the job in the
session; if a job with the same name already exists, this
item will be ignored.</li>
<li><cite>cls</cite> is a callable that returns an instance of
<cite>gc3libs.Application</cite> when called as <cite>cls(*args, **kwargs)</cite>.</li>
<li><cite>args</cite> is a tuple of arguments for calling <cite>cls</cite>.</li>
<li><cite>kwargs</cite> is a dictionary used to provide keyword arguments
when calling <cite>cls</cite>.</li>
</ul>
<p>This method is called by the default <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.process_args" title="gc3libs.cmdline.SessionBasedScript.process_args"><tt class="xref py py-meth docutils literal"><span class="pre">process_args()</span></tt></a>, passing
<cite>self.extra</cite> as the <cite>extra</cite> parameter.</p>
<p>The default implementation of this method scans the arguments
on the command-line for files matching the glob pattern
<cite>self.input_filename_pattern</cite>, and for each matching file returns
a job name formed by the base name of the file (sans
extension), the class given by <cite>self.application</cite>, and the
full path to the input file as sole argument.</p>
<p>If <cite>self.instances_per_file</cite> and <cite>self.instances_per_job</cite> are
set to a value other than 1, for each matching file N jobs are
generated, where N is the quotient of
<cite>self.instances_per_file</cite> by <cite>self.instances_per_job</cite>.</p>
<p>See also: <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.process_args" title="gc3libs.cmdline.SessionBasedScript.process_args"><tt class="xref py py-meth docutils literal"><span class="pre">process_args()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform parsing of standard command-line options and call into
<cite>parse_args()</cite> to do non-optional argument processing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.print_summary_table">
<tt class="descname">print_summary_table</tt><big>(</big><em>output</em>, <em>stats</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.print_summary_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a text summary of the session status to <cite>output</cite>.
This is used to provide the &#8220;normal&#8221; output of the
script; when the <tt class="docutils literal"><span class="pre">-l</span></tt> option is given, the output
of the <cite>print_tasks_table</cite> function is appended.</p>
<p>Override this in subclasses to customize the report that you
provide to users.  By default, this prints a table with the
count of tasks for each possible state.</p>
<p>The <cite>output</cite> argument is a file-like object, only the <cite>write</cite>
method of which is used.  The <cite>stats</cite> argument is a
dictionary, mapping each possible <cite>Run.State</cite> to the count of
tasks in that state; see <cite>Engine.stats</cite> for a detailed
description.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.print_tasks_table">
<tt class="descname">print_tasks_table</tt><big>(</big><em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b73995ce1e0&gt;</em>, <em>states=Enum(['TERMINATED'</em>, <em>'UNKNOWN'</em>, <em>'SUBMITTED'</em>, <em>'RUNNING'</em>, <em>'TERMINATING'</em>, <em>'STOPPED'</em>, <em>'NEW'])</em>, <em>only=&lt;type 'object'&gt;</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.print_tasks_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a text table to stream <cite>output</cite>, giving details about
tasks in the given states.</p>
<p>Optional second argument <cite>states</cite> restricts the listing to
tasks that are in one of the specified states.  By default, all
task states are allowed.  The <cite>states</cite> argument should be a
list or a set of <cite>Run.State</cite> values.</p>
<p>Optional third argument <cite>only</cite> further restricts the listing
to tasks that are instances of a subclass of <cite>only</cite>.  By
default, there is no restriction and all tasks are listed. The
<cite>only</cite> argument can be a Python class or a tuple &#8211; anything
infact, that you can pass as second argument to the
<cite>isinstance</cite> operator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output</strong> &#8211; An output stream (file-like object)</li>
<li><strong>states</strong> &#8211; List of states (<cite>Run.State</cite> items) to consider.</li>
<li><strong>only</strong> &#8211; Root class (or tuple of root classes) of tasks to consider.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.process_args">
<tt class="descname">process_args</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.process_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Process command-line positional arguments and set up the
session accordingly.  In particular, new jobs should be added
to the session during the execution of this method: additions
are not contemplated elsewhere.</p>
<p>This method is called by the standard <tt class="xref py py-meth docutils literal"><span class="pre">_main()</span></tt> after
loading or creating a session into <cite>self.session</cite>.  New jobs
should be appended to <cite>self.session</cite> and it is also permitted to
remove existing ones.</p>
<p>The default implementation calls <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.new_tasks" title="gc3libs.cmdline.SessionBasedScript.new_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">new_tasks()</span></tt></a> and adds to
the session all jobs whose name does not clash with the
jobname of an already existing task.</p>
<p>See also: <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.new_tasks" title="gc3libs.cmdline.SessionBasedScript.new_tasks"><tt class="xref py py-meth docutils literal"><span class="pre">new_tasks()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup standard command-line parsing.</p>
<p>GC3Libs scripts should probably override <a class="reference internal" href="#gc3libs.cmdline.SessionBasedScript.setup_args" title="gc3libs.cmdline.SessionBasedScript.setup_args"><tt class="xref py py-meth docutils literal"><span class="pre">setup_args()</span></tt></a>
to modify command-line parsing.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.cmdline.SessionBasedScript.setup_args">
<tt class="descname">setup_args</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.cmdline.SessionBasedScript.setup_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up command-line argument parsing.</p>
<p>The default command line parsing considers every argument as
an (input) path name; processing of the given path names is
done in <tt class="xref py py-meth docutils literal"><span class="pre">parse_args()</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.cmdline.nonnegative_int">
<tt class="descclassname">gc3libs.cmdline.</tt><tt class="descname">nonnegative_int</tt><big>(</big><em>num</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.nonnegative_int" title="Permalink to this definition">¶</a></dt>
<dd><p>This function raise an ArgumentTypeError if <cite>num</cite> is a negative
integer (&lt;0), and returns int(num) otherwise. <cite>num</cite> can be any
object which can be converted to an int.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="s">&#39;-1&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;-1&#39; is not a non-negative integer number.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;-1&#39; is not a non-negative integer number.</span>
</pre></div>
</div>
<p>Please note that <cite>0</cite> and <cite>&#8216;-0&#8217;</cite> are ok:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="s">&#39;-0&#39;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Floats are ok too:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="mf">3.14</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">nonnegative_int</span><span class="p">(</span><span class="s">&#39;ThisWillRaiseAnException&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;ThisWillRaiseAnException&#39; is not a non-negative integer number.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.cmdline.positive_int">
<tt class="descclassname">gc3libs.cmdline.</tt><tt class="descname">positive_int</tt><big>(</big><em>num</em><big>)</big><a class="headerlink" href="#gc3libs.cmdline.positive_int" title="Permalink to this definition">¶</a></dt>
<dd><p>This function raises an ArgumentTypeError if <cite>num</cite> is not
a*strictly* positive integer (&gt;0) and returns int(num)
otherwise. <cite>num</cite> can be any object which can be converted to an
int.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="s">&#39;-1&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;-1&#39; is not a positive integer number.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;-1&#39; is not a positive integer number.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;0&#39; is not a positive integer number.</span>
</pre></div>
</div>
<p>Floats are ok too:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="mf">3.14</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>but please take care that float <em>greater</em> than 0 will fail:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;0.1&#39; is not a positive integer number.</span>
</pre></div>
</div>
<p>Please note that <cite>0</cite> is NOT ok:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;0&#39; is not a positive integer number.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;0&#39; is not a positive integer number.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="s">&#39;-0&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;-0&#39; is not a positive integer number.</span>
</pre></div>
</div>
<p>Any string which does cannot be converted to an integer will fail:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">positive_int</span><span class="p">(</span><span class="s">&#39;ThisWillRaiseAnException&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ArgumentTypeError</span>: <span class="n">&#39;ThisWillRaiseAnException&#39; is not a positive integer number.</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.config">
<span id="gc3libs-config"></span><h2><cite>gc3libs.config</cite><a class="headerlink" href="#module-gc3libs.config" title="Permalink to this headline">¶</a></h2>
<p>Deal with GC3Pie configuration files.</p>
<dl class="class">
<dt id="gc3libs.config.Configuration">
<em class="property">class </em><tt class="descclassname">gc3libs.config.</tt><tt class="descname">Configuration</tt><big>(</big><em>*locations</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.config.Configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>In-memory representation of the GC3Pie configuration.</p>
<p>This class provides facilities for:</p>
<ul class="simple">
<li>parsing configuration files (methods <a class="reference internal" href="#gc3libs.config.Configuration.load" title="gc3libs.config.Configuration.load"><tt class="xref py py-meth docutils literal"><span class="pre">load()</span></tt></a> and
<a class="reference internal" href="#gc3libs.config.Configuration.merge_file" title="gc3libs.config.Configuration.merge_file"><tt class="xref py py-meth docutils literal"><span class="pre">merge_file()</span></tt></a>);</li>
<li>validating the loaded values;</li>
<li>instanciating the internal GC3Pie objects resulting from the
configuration (methods <a class="reference internal" href="#gc3libs.config.Configuration.make_auth" title="gc3libs.config.Configuration.make_auth"><tt class="xref py py-meth docutils literal"><span class="pre">make_auth()</span></tt></a> and
<tt class="xref py py-meth docutils literal"><span class="pre">make_resource()</span></tt>).</li>
</ul>
<p>The constructor takes a list of files to load (<cite>locations</cite>) and a
list of key=value pairs to provide defaults for the configuration.
Both lists are optional and can be omitted, resulting in a
configuration containing only GC3Pie default values.</p>
<p>Example 1: initialization from config file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example_cfgfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s">&#39;etc/gc3pie.conf.example&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">example_cfgfile</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">debug</span>
<span class="go">&#39;0&#39;</span>
</pre></div>
</div>
<p>Example 2: initialization from key=value list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">auto_enable_auth</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">auto_enable_auth</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">foo</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">bar</span>
<span class="go">&#39;baz&#39;</span>
</pre></div>
</div>
<p>When both a configuration file <em>and</em> a key=value list is present,
values in the configuration files override those in the key=value
list:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="n">example_cfgfile</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">debug</span>
<span class="go">&#39;0&#39;</span>
</pre></div>
</div>
<p>Example 3: default initialization:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cfg</span><span class="o">.</span><span class="n">auto_enable_auth</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="gc3libs.config.Configuration.auth_factory">
<tt class="descname">auth_factory</tt><a class="headerlink" href="#gc3libs.config.Configuration.auth_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance of <a class="reference internal" href="#gc3libs.authentication.Auth" title="gc3libs.authentication.Auth"><tt class="xref py py-class docutils literal"><span class="pre">gc3libs.authentication.Auth</span></tt></a> used to
manage auth access for the resources.</p>
<p>This is a <em>read-only</em> attribute, created upon first access
with the values set in <cite>self.auths</cite> and <cite>self.auto_enabled</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.config.Configuration.load">
<tt class="descname">load</tt><big>(</big><em>*locations</em><big>)</big><a class="headerlink" href="#gc3libs.config.Configuration.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge settings from configuration files into this <cite>Configuration</cite> instance.</p>
<p>Environment variables and <cite>~</cite> references are expanded in the
location file names.</p>
<p>If any of the specified files does not exist or cannot be read
(for whatever reason), a message is logged but the error is
ignored.  However, a <cite>NoConfigurationFile</cite> exception is raised
if <em>none</em> of the specified locations could be read.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="#gc3libs.exceptions.NoConfigurationFile" title="gc3libs.exceptions.NoConfigurationFile">gc3libs.exceptions.NoConfigurationFile</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if none of the specified files could be read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.config.Configuration.make_auth">
<tt class="descname">make_auth</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#gc3libs.config.Configuration.make_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>Return factory for auth credentials configured in section <tt class="docutils literal"><span class="pre">[auth/name]</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.config.Configuration.make_resources">
<tt class="descname">make_resources</tt><big>(</big><em>ignore_errors=True</em><big>)</big><a class="headerlink" href="#gc3libs.config.Configuration.make_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Make backend objects corresponding to the configured resources.</p>
<p>Return a dictionary, mapping the resource name (string) into
the corresponding backend object.</p>
<p>By default, errors in constructing backends (e.g., due to a
bad configuration) are silently ignored: the offending
configuration is just dropped.  This can be changed by setting
the optional argument <cite>ignore_errors</cite> to <cite>False</cite>: in this
case, an exception is raised whenever we fail to construct a
backend.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.config.Configuration.merge_file">
<tt class="descname">merge_file</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#gc3libs.config.Configuration.merge_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read configuration files and merge the settings into this <cite>Configuration</cite> object.</p>
<p>Contrary to <a class="reference internal" href="#gc3libs.config.Configuration.load" title="gc3libs.config.Configuration.load"><tt class="xref py py-meth docutils literal"><span class="pre">load()</span></tt></a> (which see), the file name is taken
literally and an error is raised if the file cannot be read
for whatever reason.</p>
<p>Any parameter which is set in the configuration files
<tt class="docutils literal"><span class="pre">[DEFAULT]</span></tt> section, and whose name does not start with
underscore (<tt class="docutils literal"><span class="pre">_</span></tt>) defines an attribute in the current
<cite>Configuration</cite>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">No type conversion is performed on values set this way - so
they all end up being strings!</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference internal" href="#gc3libs.exceptions.ConfigurationError" title="gc3libs.exceptions.ConfigurationError">gc3libs.exceptions.ConfigurationError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if the
configuration file does not exist, cannot be read, is
corrupt or has wrong format.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.core">
<span id="gc3libs-core"></span><h2><cite>gc3libs.core</cite><a class="headerlink" href="#module-gc3libs.core" title="Permalink to this headline">¶</a></h2>
<p>Top-level interface to Grid functionality.</p>
<dl class="class">
<dt id="gc3libs.core.Core">
<em class="property">class </em><tt class="descclassname">gc3libs.core.</tt><tt class="descname">Core</tt><big>(</big><em>cfg</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core" title="Permalink to this definition">¶</a></dt>
<dd><p>Core operations: submit, update state, retrieve (a
snapshot of) output, cancel job.</p>
<p>Core operations are <em>blocking</em>, i.e., they return only after the
operation has successfully completed, or an error has been detected.</p>
<p>Operations are always performed by a <cite>Core</cite> object.
<cite>Core</cite> implements an overlay Grid on the resources
specified in the configuration file.</p>
<dl class="method">
<dt id="gc3libs.core.Core.add">
<tt class="descname">add</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.add" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is here just to allow <cite>Core</cite> and <cite>Engine</cite> objects
to be used interchangeably.  It&#8217;s effectively a no-op, as it makes
no sense in the synchronous/blocking semantics implemented by <cite>Core</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.core.Core.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to invoke explicitly the destructor on objects
e.g. LRMS</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.fetch_output">
<tt class="descname">fetch_output</tt><big>(</big><em>app</em>, <em>download_dir=None</em>, <em>overwrite=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.fetch_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve output into local directory <cite>app.output_dir</cite>;
optional argument <cite>download_dir</cite> overrides this.</p>
<p>The download directory is created if it does not exist.  If it
already exists, and the optional argument <cite>overwrite</cite> is
<cite>False</cite> (default), it is renamed with a <cite>.NUMBER</cite> suffix and a
new empty one is created in its place.  Otherwise, if
&#8216;overwrite` is <cite>True</cite>, files are downloaded over the ones
already present.</p>
<p>If the task is in TERMINATING state, the state is changed to
<cite>TERMINATED</cite>, attribute <tt class="xref py py-attr docutils literal"><span class="pre">output_dir</span></tt> is set to the
absolute path to the directory where files were downloaded,
and the <cite>terminated</cite> transition method is called on the <cite>app</cite>
object.</p>
<p>Task output cannot be retrieved when <cite>app.execution</cite> is in one
of the states <cite>NEW</cite> or <cite>SUBMITTED</cite>; an
<cite>OutputNotAvailableError</cite> exception is thrown in these cases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise :</th><td class="field-body"><cite>gc3libs.exceptions.OutputNotAvailableError</cite> if no
output can be fetched from the remote job (e.g., the
Application/Task object is in <cite>NEW</cite> or <cite>SUBMITTED</cite>
state, indicating the remote job has not started
running).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.free">
<tt class="descname">free</tt><big>(</big><em>app</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free up any remote resources used for the execution of <cite>app</cite>.
In particular, this should delete any remote directories and
files.</p>
<p>It is an error to call this method if <cite>app.execution.state</cite> is
anything other than <cite>TERMINATED</cite>: an <cite>InvalidOperation</cite> exception
will be raised in this case.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise :</th><td class="field-body"><cite>gc3libs.exceptions.InvalidOperation</cite> if <cite>app.execution.state</cite>
differs from <cite>Run.State.TERMINATED</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.get_resources">
<tt class="descname">get_resources</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.get_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of resources configured into this <cite>Core</cite> instance.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.kill">
<tt class="descname">kill</tt><big>(</big><em>app</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate a job.</p>
<p>Terminating a job in RUNNING, SUBMITTED, or STOPPED state
entails canceling the job with the remote execution system;
terminating a job in the NEW or TERMINATED state is a no-op.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.peek">
<tt class="descname">peek</tt><big>(</big><em>app</em>, <em>what='stdout'</em>, <em>offset=0</em>, <em>size=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at <cite>offset</cite> bytes from the start) from
the remote job standard output or error stream, and write them
into a local file.  Return file-like object from which the
downloaded contents can be read.</p>
<p>If <cite>size</cite> is <cite>None</cite> (default), then snarf all available
contents of the remote stream from <cite>offset</cite> unto the end.</p>
<p>The only allowed values for the <cite>what</cite> arguments are the
strings <cite>&#8216;stdout&#8217;</cite> and <cite>&#8216;stderr&#8217;</cite>, indicating that the
relevant section of the job&#8217;s standard output resp. standard
error should be downloaded.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.remove">
<tt class="descname">remove</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is here just to allow <cite>Core</cite> and <cite>Engine</cite> objects
to be used interchangeably.  It&#8217;s effectively a no-op, as it makes
no sense in the synchronous/blocking semantics implemented by <cite>Core</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.select_resource">
<tt class="descname">select_resource</tt><big>(</big><em>match</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.select_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Alter the configured list of resources, and retain only those
that satisfy predicate <cite>match</cite>.</p>
<p>Argument <cite>match</cite> can be:</p>
<blockquote>
<div><ul class="simple">
<li>either a function (or a generic callable) that is passed
each <cite>Resource</cite> object in turn, and should return a
boolean indicating whether the resources should be kept
(<cite>True</cite>) or not (<cite>False</cite>);</li>
<li>or it can be a string: only resources whose name matches
(wildcards <tt class="docutils literal"><span class="pre">*</span></tt> and <tt class="docutils literal"><span class="pre">?</span></tt> are allowed) are retained.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.submit">
<tt class="descname">submit</tt><big>(</big><em>app</em>, <em>resubmit=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit a job running an instance of the given <cite>app</cite>.  Upon
successful submission, call the <cite>submitted</cite> method on the
<cite>app</cite> object.</p>
<p>At the beginning of the submission process, the
<cite>app.execution</cite> state is reset to <tt class="docutils literal"><span class="pre">NEW</span></tt>; if submission is
successfull, the task will be in <tt class="docutils literal"><span class="pre">SUBMITTED</span></tt> or <tt class="docutils literal"><span class="pre">RUNNING</span></tt>
state when this call returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise :</th><td class="field-body"><cite>gc3libs.exceptions.InputFileError</cite> if an input file
does not exist or cannot otherwise be read.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>*apps</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update state of all applications passed in as arguments.</p>
<p>If keyword argument <cite>update_on_error</cite> is <cite>False</cite> (default),
then application execution state is not changed in case a
backend error happens; it is changed to <cite>UNKNOWN</cite> otherwise.</p>
<p>Note that if state of a job changes, the <cite>Run.state</cite> calls the
appropriate handler method on the application/task object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise :</th><td class="field-body"><cite>gc3libs.exceptions.InvalidArgument</cite> in case one of
the passed <cite>Application</cite> or <cite>Task</cite> objects is
invalid. This can stop updating the state of other
objects in the argument list.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise :</th><td class="field-body"><cite>gc3libs.exceptions.ConfigurationError</cite> if the
configuration of this <cite>Core</cite> object is invalid or
otherwise inconsistent (e.g., a resource references a
non-existing auth section).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Core.update_resources">
<tt class="descname">update_resources</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Core.update_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the state of resources configured into this <cite>Core</cite> instance.</p>
<p>Each resource object in the returned list will have its <cite>updated</cite> attribute
set to <cite>True</cite> if the update operation succeeded, or <cite>False</cite> if it failed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.core.Engine">
<em class="property">class </em><tt class="descclassname">gc3libs.core.</tt><tt class="descname">Engine</tt><big>(</big><em>controller</em>, <em>tasks=</em><span class="optional">[</span><span class="optional">]</span>, <em>store=None</em>, <em>can_submit=True</em>, <em>can_retrieve=True</em>, <em>max_in_flight=0</em>, <em>max_submitted=0</em>, <em>output_dir=None</em>, <em>fetch_output_overwrites=False</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit tasks in a collection, and update their state until a
terminal state is reached. Specifically:</p>
<blockquote>
<div><ul class="simple">
<li>tasks in <cite>NEW</cite> state are submitted;</li>
<li>the state of tasks in <cite>SUBMITTED</cite>, <cite>RUNNING</cite> or <cite>STOPPED</cite> state is updated;</li>
<li>when a task reaches <cite>TERMINATED</cite> state, its output is downloaded.</li>
</ul>
</div></blockquote>
<p>The behavior of <cite>Engine</cite> instances can be further customized by
setting the following instance attributes:</p>
<blockquote>
<div><dl class="docutils">
<dt><cite>can_submit</cite></dt>
<dd>Boolean value: if <cite>False</cite>, no task will be submitted.</dd>
<dt><cite>can_retrieve</cite></dt>
<dd>Boolean value: if <cite>False</cite>, no output will ever be retrieved.</dd>
<dt><cite>max_in_flight</cite></dt>
<dd>If &gt;0, limit the number of tasks in <cite>SUBMITTED</cite> or <cite>RUNNING</cite>
state: if the number of tasks in <cite>SUBMITTED</cite>, <cite>RUNNING</cite> or
<cite>STOPPED</cite> state is greater than <cite>max_in_flight</cite>, then no new
submissions will be attempted.</dd>
<dt><cite>max_submitted</cite></dt>
<dd>If &gt;0, limit the number of tasks in <cite>SUBMITTED</cite> state: if the
number of tasks in <cite>SUBMITTED</cite>, <cite>RUNNING</cite> or <cite>STOPPED</cite> state is
greater than <cite>max_submitted</cite>, then no new submissions will be
attempted.</dd>
<dt><cite>output_dir</cite></dt>
<dd>Base directory for job output; if not <cite>None</cite>, each task&#8217;s
results will be downloaded in a subdirectory named after the
task&#8217;s <cite>permanent_id</cite>.</dd>
<dt><cite>fetch_output_overwrites</cite></dt>
<dd>Default value to pass as the <cite>overwrite</cite> argument to
<a class="reference internal" href="#gc3libs.core.Core.fetch_output" title="gc3libs.core.Core.fetch_output"><tt class="xref py py-meth docutils literal"><span class="pre">Core.fetch_output()</span></tt></a> when retrieving results of a
terminated task.</dd>
</dl>
</div></blockquote>
<p>Any of the above can also be set by passing a keyword argument to
the constructor (assume <tt class="docutils literal"><span class="pre">g</span></tt> is a <a class="reference internal" href="#gc3libs.core.Core" title="gc3libs.core.Core"><tt class="xref py py-class docutils literal"><span class="pre">Core</span></tt></a> instance):</p>
<div class="highlight-python"><pre>| &gt;&gt;&gt; e = Engine(g, can_submit=False)
| &gt;&gt;&gt; e.can_submit
| False</pre>
</div>
<dl class="method">
<dt id="gc3libs.core.Engine.add">
<tt class="descname">add</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <cite>task</cite> to the list of tasks managed by this Engine.
Adding a task that has already been added to this <cite>Engine</cite>
instance results in a no-op.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Call explicilty finalize methods on relevant objects
e.g. LRMS</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.fetch_output">
<tt class="descname">fetch_output</tt><big>(</big><em>task</em>, <em>output_dir=None</em>, <em>overwrite=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.fetch_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for <cite>Core.fetch_output</cite> (which see).</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.free">
<tt class="descname">free</tt><big>(</big><em>task</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for <cite>Core.free</cite>, which see.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.kill">
<tt class="descname">kill</tt><big>(</big><em>task</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule a task for killing on the next <cite>progress</cite> run.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.peek">
<tt class="descname">peek</tt><big>(</big><em>task</em>, <em>what='stdout'</em>, <em>offset=0</em>, <em>size=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Proxy for <cite>Core.peek</cite> (which see).</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.progress">
<tt class="descname">progress</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Update state of all registered tasks and take appropriate action.
Specifically:</p>
<blockquote>
<div><ul class="simple">
<li>tasks in <cite>NEW</cite> state are submitted;</li>
<li>the state of tasks in <cite>SUBMITTED</cite>, <cite>RUNNING</cite>, <cite>STOPPED</cite> or <cite>UNKNOWN</cite> state is updated;</li>
<li>when a task reaches <cite>TERMINATING</cite> state, its output is downloaded.</li>
<li>tasks in <cite>TERMINATED</cite> status are simply ignored.</li>
</ul>
</div></blockquote>
<p>The <cite>max_in_flight</cite> and <cite>max_submitted</cite> limits (if &gt;0) are
taken into account when attempting submission of tasks.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.remove">
<tt class="descname">remove</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a <cite>task</cite> from the list of tasks managed by this Engine.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.stats">
<tt class="descname">stats</tt><big>(</big><em>only=None</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping each state name into the count of
tasks in that state. In addition, the following keys are defined:</p>
<ul class="simple">
<li><cite>ok</cite>:  count of TERMINATED tasks with return code 0</li>
<li><cite>failed</cite>: count of TERMINATED tasks with nonzero return code</li>
<li><cite>total</cite>: total count of managed tasks, whatever their state</li>
</ul>
<p>If the optional argument <cite>only</cite> is not None, tasks whose
whose class is not contained in <cite>only</cite> are ignored.
: param tuple only: Restrict counting to tasks of these classes.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.submit">
<tt class="descname">submit</tt><big>(</big><em>task</em>, <em>resubmit=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit <cite>task</cite> at the next invocation of <cite>perform</cite>.</p>
<p>The <cite>task</cite> state is reset to <tt class="docutils literal"><span class="pre">NEW</span></tt> and then added to the
collection of managed tasks.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.core.Engine.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>*tasks</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.core.Engine.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of <em>current</em> states of the given tasks.  States
will only be updated at the next invocation of <cite>progress</cite>; in
particular, no state-change handlers are called as a result of
calling this method.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.workflow">
<span id="gc3libs-workflow"></span><h2><cite>gc3libs.workflow</cite><a class="headerlink" href="#module-gc3libs.workflow" title="Permalink to this headline">¶</a></h2>
<p>Implementation of task collections.</p>
<p>Tasks can be grouped into collections, which are tasks themselves,
therefore can be controlled (started/stopped/cancelled) like a single
whole.  Collection classes provided in this module implement the basic
patterns of job group execution; they can be combined to form more
complex workflows.  Hook methods are provided so that derived classes
can implement problem-specific job control policies.</p>
<dl class="class">
<dt id="gc3libs.workflow.ParallelTaskCollection">
<em class="property">class </em><tt class="descclassname">gc3libs.workflow.</tt><tt class="descname">ParallelTaskCollection</tt><big>(</big><em>tasks=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.ParallelTaskCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>ParallelTaskCollection</cite> runs all of its tasks concurrently.</p>
<p>The collection state is set to <cite>TERMINATED</cite> once all tasks have
reached the same terminal status.</p>
<dl class="method">
<dt id="gc3libs.workflow.ParallelTaskCollection.kill">
<tt class="descname">kill</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.ParallelTaskCollection.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate all tasks in the collection, and set collection
state to <cite>TERMINATED</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.ParallelTaskCollection.progress">
<tt class="descname">progress</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.workflow.ParallelTaskCollection.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to advance all jobs in the collection to the next state in
a normal lifecycle.  Return list of task execution states.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.ParallelTaskCollection.submit">
<tt class="descname">submit</tt><big>(</big><em>resubmit=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.ParallelTaskCollection.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Start all tasks in the collection.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.ParallelTaskCollection.update_state">
<tt class="descname">update_state</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.ParallelTaskCollection.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update state of all tasks in the collection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.workflow.RetryableTask">
<em class="property">class </em><tt class="descclassname">gc3libs.workflow.</tt><tt class="descname">RetryableTask</tt><big>(</big><em>task</em>, <em>max_retries=0</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.RetryableTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a <cite>Task</cite> instance and re-submit it until a specified
termination condition is met.</p>
<p>By default, the re-submission upon failure happens iff execution
terminated with nonzero return code; the failed task is retried up
to <cite>self.max_retries</cite> times (indefinitely if <cite>self.max_retries</cite> is 0).</p>
<p>Override the <cite>retry</cite> method to implement a different retryal policy.</p>
<p><em>Note:</em> The resubmission code is implemented in the
<tt class="xref py py-meth docutils literal"><span class="pre">terminated()</span></tt>, so be sure to call it if you override in
derived classes.</p>
<dl class="method">
<dt id="gc3libs.workflow.RetryableTask.retry">
<tt class="descname">retry</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.workflow.RetryableTask.retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>True</cite> or <cite>False</cite>, depending on whether the failed task
should be re-submitted or not.</p>
<p>The default behavior is to retry a task iff its execution
terminated with nonzero returncode and the maximum retry limit
has not been reached.  If <cite>self.max_retries</cite> is 0, then the
dependent task is retried indefinitely.</p>
<p>Override this method in subclasses to implement a different
policy.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.RetryableTask.update_state">
<tt class="descname">update_state</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.workflow.RetryableTask.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the state of the dependent task, then resubmit it if it&#8217;s
TERMINATED and <cite>self.retry()</cite> is <cite>True</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.workflow.SequentialTaskCollection">
<em class="property">class </em><tt class="descclassname">gc3libs.workflow.</tt><tt class="descname">SequentialTaskCollection</tt><big>(</big><em>tasks</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>SequentialTaskCollection</cite> runs its tasks one at a time.</p>
<p>After a task has completed, the <cite>next</cite> method is called with the
index of the finished task in the <cite>self.tasks</cite> list; the return
value of the <cite>next</cite> method is then made the collection
<cite>execution.state</cite>.  If the returned state is <cite>RUNNING</cite>, then the
subsequent task is started, otherwise no action is performed.</p>
<p>The default <cite>next</cite> implementation just runs the tasks in the order
they were given to the constructor, and sets the state to
<cite>TERMINATED</cite> when all tasks have been run.</p>
<dl class="method">
<dt id="gc3libs.workflow.SequentialTaskCollection.kill">
<tt class="descname">kill</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop execution of this sequence.  Kill currently-running task
(if any), then set collection state to TERMINATED.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.SequentialTaskCollection.next">
<tt class="descname">next</tt><big>(</big><em>done</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection.next" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the state or task to run when step number <cite>done</cite> is completed.</p>
<p>This method is called when a task is finished; the <cite>done</cite>
argument contains the index number of the just-finished task
into the <cite>self.tasks</cite> list.  In other words, the task that
just completed is available as <cite>self.tasks[done]</cite>.</p>
<p>The return value from <cite>next</cite> can be either a task state (i.e.,
an instance of <cite>Run.State</cite>), or a valid index number for
<cite>self.tasks</cite>. In the first case:</p>
<ul class="simple">
<li>if the return value is <cite>Run.State.TERMINATED</cite>,
then no other jobs will be run;</li>
<li>otherwise, the return value is assigned to <cite>execution.state</cite>
and the next job in the <cite>self.tasks</cite> list is executed.</li>
</ul>
<p>If instead the return value is a (nonnegative) number, then
tasks in the sequence will be re-run starting from that index.</p>
<p>The default implementation runs tasks in the order they were
given to the constructor, and sets the state to TERMINATED
when all tasks have been run.  This method can (and should) be
overridden in derived classes to implement policies for serial
job execution.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.SequentialTaskCollection.progress">
<tt class="descname">progress</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequentially advance tasks in the collection through all steps
of a regular lifecycle.  When the last task transitions to
TERMINATED state, the collection&#8217;s state is set to TERMINATED
as well and this method becomes a no-op.  If during execution,
any of the managed jobs gets into state <cite>STOPPED</cite> or
<cite>UNKNOWN</cite>, then an exception <cite>Task.UnexpectedExecutionState</cite>
is raised.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.SequentialTaskCollection.submit">
<tt class="descname">submit</tt><big>(</big><em>resubmit=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the current task in the collection.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.SequentialTaskCollection.update_state">
<tt class="descname">update_state</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.SequentialTaskCollection.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update state of the collection, based on the jobs&#8217; statuses.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.workflow.StagedTaskCollection">
<em class="property">class </em><tt class="descclassname">gc3libs.workflow.</tt><tt class="descname">StagedTaskCollection</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.StagedTaskCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplified interface for creating a sequence of Tasks.
This can be used when the number of Tasks to run is
fixed and known at program writing time.</p>
<p>A <cite>StagedTaskCollection</cite> subclass should define methods <cite>stage0</cite>,
<cite>stage1</cite>, ... up to <cite>stageN</cite> (for some arbitrary value of N positive
integer).  Each of these <cite>stageN</cite> must return a <tt class="xref py py-class docutils literal"><span class="pre">Task</span></tt>
instance; the task returned by the <cite>stage0</cite> method will be executed
first, followed by the task returned by <cite>stage1</cite>, and so on.
The sequence stops at the first N such that <cite>stageN</cite> is not defined.</p>
<p>The exit status of the whole sequence is the exit status of the
last <cite>Task</cite> instance run.  However, if any of the <cite>stageX</cite> methods
returns an integer value instead of a <cite>Task</cite> instance, then the
sequence stops and that number is used as the sequence exit
code.</p>
</dd></dl>

<dl class="class">
<dt id="gc3libs.workflow.TaskCollection">
<em class="property">class </em><tt class="descclassname">gc3libs.workflow.</tt><tt class="descname">TaskCollection</tt><big>(</big><em>tasks=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all task collections. A &#8220;task collection&#8221; is a
group of tasks, that can be managed collectively as a single one.</p>
<p>A task collection implements the same interface as the <cite>Task</cite>
class, so you can use a <cite>TaskCollection</cite> everywhere a <cite>Task</cite> is
required.  A task collection has a <cite>state</cite> attribute, which is an
instance of <cite>gc3libs.Run.State</cite>; each concrete collection class
decides how to deduce a collective state based on the individual
task states.</p>
<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.add">
<tt class="descname">add</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a task to the collection.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.attach">
<tt class="descname">attach</tt><big>(</big><em>controller</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the given Controller interface for operations on the job
associated with this task.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.peek">
<tt class="descname">peek</tt><big>(</big><em>what</em>, <em>offset=0</em>, <em>size=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a <cite>gc3libs.exceptions.InvalidOperation</cite> error, as there
is no meaningful semantics that can be defined for <cite>peek</cite> into
a generic collection of tasks.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.remove">
<tt class="descname">remove</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a task from the collection.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.stats">
<tt class="descname">stats</tt><big>(</big><em>only=None</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary mapping each state name into the count of
tasks in that state. In addition, the following keys are defined:</p>
<ul class="simple">
<li><cite>ok</cite>:  count of TERMINATED tasks with return code 0</li>
<li><cite>failed</cite>: count of TERMINATED tasks with nonzero return code</li>
<li><cite>total</cite>: count of managed tasks, whatever their state</li>
</ul>
<p>If the optional argument <cite>only</cite> is not None, tasks whose
class is not contained in <cite>only</cite> are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>only</strong> (<em>tuple</em>) &#8211; Restrict counting to tasks of these classes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.update_state">
<tt class="descname">update_state</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the running state of all managed tasks.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.workflow.TaskCollection.wait">
<tt class="descname">wait</tt><big>(</big><em>interval=60</em><big>)</big><a class="headerlink" href="#gc3libs.workflow.TaskCollection.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until execution state reaches <cite>TERMINATED</cite>, then return
a list of return codes.  Note that this does not automatically
fetch the output.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>interval</strong> (<em>integer</em>) &#8211; Poll job state every this number of seconds</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.exceptions">
<span id="gc3libs-exceptions"></span><h2><cite>gc3libs.exceptions</cite><a class="headerlink" href="#module-gc3libs.exceptions" title="Permalink to this headline">¶</a></h2>
<p>Exceptions specific to the <cite>gc3libs</cite> package.</p>
<p>In addition to the exceptions listed here, <a class="reference internal" href="#module-gc3libs" title="gc3libs"><tt class="xref py py-mod docutils literal"><span class="pre">gc3libs</span></tt></a> functions
try to use Python builtin exceptions with the same meaning they have
in core Python, namely:</p>
<ul class="simple">
<li><cite>TypeError</cite> is raised when an argument to a function or method has an
incompatible type or does not implement the required protocol (e.g.,
a number is given where a sequence is expected).</li>
<li><cite>ValueError`is  raised when an argument to a function or method has
the correct type, but fails to satisfy other constraints in the
function contract (e.g., a positive number is required, and `-1</cite> is
passed instead).</li>
<li><cite>AssertionError</cite> is raised when some internal assumption regarding
state or function/method calling contract is violated.  Informally,
this indicates a bug in the software.</li>
</ul>
<dl class="exception">
<dt id="gc3libs.exceptions.ApplicationDescriptionError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">ApplicationDescriptionError</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.ApplicationDescriptionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the dumped description on a given Application produces something that the LRMS backend cannot process.
As an example, for arc backends, this error is raised when the parsing of the Application&#8217;s XRSL fails</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.AuthError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">AuthError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.AuthError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Auth-related errors.</p>
<p>Should <em>never</em> be instanciated: create a specific error class
describing the actual error condition.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.ConfigurationError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">ConfigurationError</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.ConfigurationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the configuration file (or parts of it) could not be
read/parsed.  Also used to signal that a required parameter is
missing or has an unknown/invalid value.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.DataStagingError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">DataStagingError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.DataStagingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for data staging and movement errors.</p>
<p>Should <em>never</em> be instanciated: create a specific error class
describing the actual error condition.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.DetachedFromGridError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">DetachedFromGridError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.DetachedFromGridError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a method (other than <tt class="xref py py-meth docutils literal"><span class="pre">attach()</span></tt>) is called on
a detached <cite>Task</cite> instance.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.DuplicateEntryError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">DuplicateEntryError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.DuplicateEntryError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <cite>Application.__init__</cite> if not all (local or remote)
entries in the input or output files are distinct.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.Error">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">Error</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all error-level exceptions in GC3Pie.</p>
<p>Generally, this indicates a non-fatal error: depending on the
nature of the task, steps could be taken to continue, but users
<em>must</em> be aware that an error condition occurred, so the message
is sent to the logs at the ERROR level.</p>
<p>Exceptions indicating an error condition after which the program
cannot continue and should immediately stop, should use the
<a class="reference internal" href="#gc3libs.exceptions.FatalError" title="gc3libs.exceptions.FatalError"><tt class="xref py py-class docutils literal"><span class="pre">FatalError</span></tt></a> base class.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.FatalError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">FatalError</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.FatalError" title="Permalink to this definition">¶</a></dt>
<dd><p>A fatal error: execution cannot continue and program should report
to user and then stop.</p>
<p>The message is sent to the logs at CRITICAL level
when the exception is first constructed.</p>
<p>This is the base class for all fatal exceptions.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InputFileError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InputFileError</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InputFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an input file is specified, which does not exist or
cannot be read.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InternalError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InternalError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InternalError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when some function cannot fulfill its duties, for reasons
that do not depend on the library client code.  For instance, when
a response string gotten from an external command cannot be parsed
as expected.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidArgument">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidArgument</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidArgument" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the arguments passed to a function do not honor some
required contract.  For instance, either one of two optional
arguments must be provided, but none of them was.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidOperation">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidOperation</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidOperation" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an operation is attempted, that is not considered
valid according to the system state.  For instance, trying to
retrieve the output of a job that has not yet been submitted.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidResourceName">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidResourceName</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidResourceName" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised to signal that no computational resource with the given
name is defined in the configuration file.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidType">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidType</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidType" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialization of`InvalidArgument` for cases when the type of
the passed argument does not match expectations.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidUsage">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidUsage</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidUsage" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a command is not provided all required arguments on
the command line, or the arguments do not match the expected
syntax.</p>
<p>Since the exception message is the last thing a user will see,
try to be specific about what is wrong on the command line.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.InvalidValue">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">InvalidValue</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.InvalidValue" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialization of`InvalidArgument` for cases when the type of
the passed argument does not match expectations.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.LoadError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">LoadError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.LoadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised upon errors loading a job from the persistent storage.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.NoConfigurationFile">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">NoConfigurationFile</tt><big>(</big><em>msg</em>, <em>do_log=True</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.NoConfigurationFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the configuration file cannot be read (e.g., does not
exist or has wrong permissions), or cannot be parsed (e.g., is
malformed).</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.NoResources">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">NoResources</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.NoResources" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised to signal that no resources are defined, or that none are
compatible with the request.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.OutputNotAvailableError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">OutputNotAvailableError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.OutputNotAvailableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised upon attempts to retrieve the output for jobs that are
still in <cite>NEW</cite> or <cite>SUBMITTED</cite> state.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.RecoverableDataStagingError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">RecoverableDataStagingError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.RecoverableDataStagingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when transient problems with copying data to or from the
remote execution site occurred.</p>
<p>This error is considered to be transient (e.g., network
connectivity interruption), so trying again at a later time could
solve the problem.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.RecoverableError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">RecoverableError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.RecoverableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to mark transient errors: retrying the same action at a later
time could succeed.</p>
<p>This exception should <em>never</em> be instanciated: it is only to be used
in <cite>except</cite> clauses to catch &#8220;try again&#8221; situations.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.TaskError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">TaskError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.TaskError" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic error condition in a <cite>Task</cite> object.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.UnexpectedStateError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">UnexpectedStateError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.UnexpectedStateError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised by <tt class="xref py py-meth docutils literal"><span class="pre">Task.progress()</span></tt> when a job lands in <cite>STOPPED</cite>
or <cite>TERMINATED</cite> state.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.UnknownJob">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">UnknownJob</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.UnknownJob" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when an operation is attempted on a task, which is
unknown to the remote server or backend.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.UnknownJobState">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">UnknownJobState</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.UnknownJobState" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a job state is gotten from the Grid middleware, that
is not handled by the GC3Libs code.  Might actually mean that
there is a version mismatch between GC3Libs and the Grid
middleware used.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.UnrecoverableDataStagingError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">UnrecoverableDataStagingError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.UnrecoverableDataStagingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when problems with copying data to or from the remote
execution site occurred.</p>
</dd></dl>

<dl class="exception">
<dt id="gc3libs.exceptions.UnrecoverableError">
<em class="property">exception </em><tt class="descclassname">gc3libs.exceptions.</tt><tt class="descname">UnrecoverableError</tt><big>(</big><em>msg</em>, <em>do_log=False</em><big>)</big><a class="headerlink" href="#gc3libs.exceptions.UnrecoverableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to mark permanent errors: there&#8217;s no point in retrying the same
action at a later time, because it will yield the same error again.</p>
<p>This exception should <em>never</em> be instanciated: it is only to be used
in <cite>except</cite> clauses to exclude &#8220;try again&#8221; situations.</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.persistence">
<span id="gc3libs-persistence"></span><h2><cite>gc3libs.persistence</cite><a class="headerlink" href="#module-gc3libs.persistence" title="Permalink to this headline">¶</a></h2>
<p>Facade to store and retrieve Job information from permanent storage.</p>
<div class="section" id="a-usage-warning">
<h3>A usage warning<a class="headerlink" href="#a-usage-warning" title="Permalink to this headline">¶</a></h3>
<p>This module saves Python objects using the <cite>pickle</cite> framework: thus,
the <cite>Application</cite> subclass corresponding to a job must be already
loaded (or at least <tt class="docutils literal"><span class="pre">import</span></tt>-able) in the Python interpreter for
<cite>pickle</cite> to be able to &#8216;undump&#8217; the object from its on-disk
representation.</p>
<p>In other words, if you create a custom <cite>Application</cite> subclass in some
client code, GC3Utils won&#8217;t be able to read job files created by this
code, because the class definition is not available in GC3Utils.</p>
<p>The recommended simple workaround is for a stand-alone script to
&#8216;import self&#8217; and then use the fully qualified name to run the script.
In other words, start your script with this boilerplate code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">myscriptname</span>
    <span class="n">myscriptname</span><span class="o">.</span><span class="n">MyScript</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The rest of the script now runs as the <tt class="docutils literal"><span class="pre">myscript</span></tt> module, which does
the trick!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Of course, the <tt class="docutils literal"><span class="pre">myscript.py</span></tt> file must be in the search path of
the Python interpreter, or GC3Utils will still complain!</p>
</div>
</div>
</div>
<div class="section" id="module-gc3libs.quantity">
<span id="gc3libs-quantity"></span><h2><cite>gc3libs.quantity</cite><a class="headerlink" href="#module-gc3libs.quantity" title="Permalink to this headline">¶</a></h2>
<p>Manipulation of quantities with units attached with automated
conversion among compatible units.</p>
<p>For details and the discussion leading up to this,
see: <cite>&lt;http://code.google.com/p/gc3pie/issues/detail?id=47&gt;</cite></p>
<dl class="class">
<dt id="gc3libs.quantity.Duration">
<em class="property">class </em><tt class="descclassname">gc3libs.quantity.</tt><tt class="descname">Duration</tt><a class="headerlink" href="#gc3libs.quantity.Duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the duration of a time lapse.</p>
<p>Construction of a duration can be done by parsing a string
specification; several formats are accepted:</p>
<div class="highlight-python"><pre>* A duration as an aggregate of days, hours, minutes and seconds::</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l3</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;1day 4hours 9minutes 16seconds&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l3</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">s</span><span class="p">)</span> <span class="c"># convert to seconds</span>
<span class="go">101356</span>
</pre></div>
</div>
<ul>
<li><p class="first">Any of the terms can be omitted (in which case it defaults
to zero):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l4</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;1day 4hours 16seconds&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l4</span> <span class="o">==</span> <span class="n">l3</span> <span class="o">-</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;9 minutes&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</li>
<li><p class="first">The unit names can be singular or plural, and any amount of
space can be added between the time unit name and the
associated amount:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l5</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3 hour 42 minute&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l6</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3 hours 42 minutes&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l7</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3hours 42minutes&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l5</span> <span class="o">==</span> <span class="n">l6</span> <span class="o">==</span> <span class="n">l7</span>
<span class="go">True</span>
</pre></div>
</div>
</li>
<li><p class="first">Unit names can also be abbreviated using just the leading
letter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l8</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3h 42m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l9</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3h42m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l8</span> <span class="o">==</span> <span class="n">l9</span>
<span class="go">True</span>
</pre></div>
</div>
</li>
<li><p class="first">The abbreviated formats HH:MM:SS and DD:HH:MM:SS are also
accepted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># 1 hour + 1 minute + 1 second</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;01:01:01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">==</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;3661 s&#39;</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c"># 1 day, 2 hours, 3 minutes, 4 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;01:02:03:04&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
<span class="go">93784</span>
</pre></div>
</div>
<p>However, the formats HH:MM and MM:SS are rejected as ambiguous:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># is this hours:minutes or minutes:seconds ?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l0</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;01:02&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ValueError: Duration &#39;01:02&#39; is ambiguous</span>: <span class="n">use &#39;1m 2s&#39; for 1 minutes and 2 seconds, or &#39;1h 2m&#39; for 1 hours and 2 minutes.</span>
</pre></div>
</div>
</li>
<li><p class="first">Finally, you can specify a duration like any other quantity,
as an integral amount of a given time unit:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;1 day&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;86400 s&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">==</span> <span class="n">l2</span>
<span class="go">True</span>
</pre></div>
</div>
</li>
</ul>
<p>A new quantity can also be defined as a multiple of an existing
one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="s">&#39;1 hour&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="n">an_hour</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">Duration</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
<span class="go">24</span>
</pre></div>
</div>
<p>The quantities <tt class="docutils literal"><span class="pre">Duration.hours</span></tt>, <tt class="docutils literal"><span class="pre">Duration.minutes</span></tt> and
<tt class="docutils literal"><span class="pre">Duration.seconds</span></tt> (and their single-letter abbreviations <tt class="docutils literal"><span class="pre">h</span></tt>,
<tt class="docutils literal"><span class="pre">m</span></tt>, <tt class="docutils literal"><span class="pre">s</span></tt>) are pre-defined with their obvious meaning.</p>
<p>Also module-level aliases <tt class="docutils literal"><span class="pre">hours</span></tt>, <tt class="docutils literal"><span class="pre">minutes</span></tt> and <tt class="docutils literal"><span class="pre">seconds</span></tt>
(and the one-letter forms) are available:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_day1</span> <span class="o">=</span> <span class="mi">24</span><span class="o">*</span><span class="n">hours</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day2</span> <span class="o">=</span> <span class="mi">1440</span><span class="o">*</span><span class="n">minutes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day3</span> <span class="o">=</span> <span class="mi">86400</span><span class="o">*</span><span class="n">seconds</span>
</pre></div>
</div>
<p>This allows for yet another way of constructing duration objects,
i.e., by passing the amount and the unit separately to the
constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_day4</span> <span class="o">=</span> <span class="n">Duration</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="n">hours</span><span class="p">)</span>
</pre></div>
</div>
<p>Two durations are equal if they indicate the exact same
amount in seconds:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_day1</span> <span class="o">==</span> <span class="n">a_day2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day1</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">86400</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day2</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">86400</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day</span> <span class="o">==</span> <span class="n">an_hour</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_day</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span>
<span class="go">1440</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span>
<span class="go">60</span>
</pre></div>
</div>
<p>Basic arithmetic is possible with durations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">two_hours</span> <span class="o">=</span> <span class="n">an_hour</span> <span class="o">+</span> <span class="n">an_hour</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">two_hours</span> <span class="o">==</span> <span class="mi">2</span><span class="o">*</span><span class="n">an_hour</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">one_hour</span> <span class="o">=</span> <span class="n">two_hours</span> <span class="o">-</span> <span class="n">an_hour</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">one_hour</span><span class="o">.</span><span class="n">amount</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
<span class="go">3600</span>
</pre></div>
</div>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">to_str()</span></tt> method allows representing a duration as a
string, and provides choice of the output format and unit.  The
format string should contain exactly two <tt class="docutils literal"><span class="pre">%</span></tt>-specifiers: the
first one is used to format the numerical amount, and the second
one to format the measurement unit name.</p>
<p>By default, the unit used originally for defining the quantity is
used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">)</span>
<span class="go">&#39;1 [hour]&#39;</span>
</pre></div>
</div>
<p>This can be overridden by specifying an optional second argument
<cite>unit</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Duration</span><span class="o">.</span><span class="n">m</span><span class="p">)</span>
<span class="go">&#39;60 [m]&#39;</span>
</pre></div>
</div>
<p>A third optional argument <cite>conv</cite> can set the numerical type to be
used for conversion computations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.1f</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Duration</span><span class="o">.</span><span class="n">m</span><span class="p">,</span> <span class="n">conv</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="go">&#39;60.0 [m]&#39;</span>
</pre></div>
</div>
<p>The default numerical type is <cite>int</cite>, which in particular implies
that you get a null amount if the requested unit is larger than
the quantity:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">an_hour</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Duration</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
<span class="go">&#39;0 [days]&#39;</span>
</pre></div>
</div>
<p>Conversion to string uses the unit originally used for defining
the quantity and the <tt class="docutils literal"><span class="pre">%g%s</span></tt> format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">an_hour</span><span class="p">)</span>
<span class="go">&#39;1hour&#39;</span>
</pre></div>
</div>
<dl class="method">
<dt id="gc3libs.quantity.Duration.to_timedelta">
<tt class="descname">to_timedelta</tt><big>(</big><em>duration</em><big>)</big><a class="headerlink" href="#gc3libs.quantity.Duration.to_timedelta" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a duration into a Python <cite>datetime.timedelta</cite> object.</p>
<p>This is useful to operate on Python&#8217;s <cite>datetime.time</cite> and
<cite>datetime.date</cite> objects, which can be added or subtracted to
<cite>datetime.timedelta</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.quantity.Memory">
<em class="property">class </em><tt class="descclassname">gc3libs.quantity.</tt><tt class="descname">Memory</tt><a class="headerlink" href="#gc3libs.quantity.Memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent an amount of RAM.</p>
<p>Construction of a memory quantity can be done by parsing a string
specification (amount followed by unit):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">byte</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="s">&#39;1 B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kilobyte</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="s">&#39;1 kB&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A new quantity can also be defined as a multiple of an existing
one:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_thousand_kB</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">*</span><span class="n">kilobyte</span>
</pre></div>
</div>
<p>The base-10 units (up to TB, Terabytes) and base-2 (up to TiB,
TiBiBytes) are available as attributes of the <cite>Memory</cite> class.
This allows for a third way of constructing quantity objects,
i.e., by passing the amount and the unit separately to the
constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Memory</span><span class="o">.</span><span class="n">MB</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_mibibyte</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Memory</span><span class="o">.</span><span class="n">MiB</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a_gigabyte</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">Memory</span><span class="o">.</span><span class="n">GB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_gibibyte</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">Memory</span><span class="o">.</span><span class="n">GiB</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">two_terabytes</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Memory</span><span class="o">.</span><span class="n">TB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">two_tibibytes</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">Memory</span><span class="o">.</span><span class="n">TiB</span>
</pre></div>
</div>
<p>Two memory quantities are equal if they indicate the exact same
amount in bytes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">kilobyte</span> <span class="o">==</span> <span class="mi">1000</span><span class="o">*</span><span class="n">byte</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span> <span class="o">==</span> <span class="n">a_mibibyte</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span> <span class="o">&lt;</span> <span class="n">a_mibibyte</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span> <span class="o">&gt;</span> <span class="n">a_gigabyte</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Basic arithmetic is possible with memory quantities:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">two_bytes</span> <span class="o">=</span> <span class="n">byte</span> <span class="o">+</span> <span class="n">byte</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">two_bytes</span> <span class="o">==</span> <span class="mi">2</span><span class="o">*</span><span class="n">byte</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The <tt class="xref py py-meth docutils literal"><span class="pre">to_str()</span></tt> method allows representing a quantity as a
string, and provides choice of the output format and unit.  The
format string should contain exactly two <tt class="docutils literal"><span class="pre">%</span></tt>-specifiers: the
first one is used to format the numerical amount, and the second
one to format the measurement unit name.</p>
<p>By default, the unit used originally for defining the quantity is
used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">)</span>
<span class="go">&#39;1 [MB]&#39;</span>
</pre></div>
</div>
<p>This can be overridden by specifying an optional second argument
<cite>unit</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s"> [</span><span class="si">%s</span><span class="s">]&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Memory</span><span class="o">.</span><span class="n">kB</span><span class="p">)</span>
<span class="go">&#39;1000 [kB]&#39;</span>
</pre></div>
</div>
<p>A third optional argument <cite>conv</cite> can set the numerical type to be
used for conversion computations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%g%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Memory</span><span class="o">.</span><span class="n">GB</span><span class="p">,</span> <span class="n">conv</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="go">&#39;0.001GB&#39;</span>
</pre></div>
</div>
<p>The default numerical type is <cite>int</cite>, which in particular implies
that you get a null amount if the requested unit is larger than
the quantity:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_megabyte</span><span class="o">.</span><span class="n">to_str</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%g%s</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">Memory</span><span class="o">.</span><span class="n">GB</span><span class="p">,</span> <span class="n">conv</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">&#39;0GB&#39;</span>
</pre></div>
</div>
<p>Conversion to string uses the unit originally used for defining
the quantity and the <tt class="docutils literal"><span class="pre">%g%s</span></tt> format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">a_megabyte</span><span class="p">)</span>
<span class="go">&#39;1MB&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="gc3libs.quantity.Quantity">
<em class="property">class </em><tt class="descclassname">gc3libs.quantity.</tt><tt class="descname">Quantity</tt><big>(</big><em>base_unit_name</em>, <em>**other_units</em><big>)</big><a class="headerlink" href="#gc3libs.quantity.Quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Metaclass for creating quantity classes.</p>
<p>This factory creates subclasses of <tt class="xref py py-class docutils literal"><span class="pre">_Quantity</span></tt> and
bootstraps the base unit.</p>
<p>The name of the base unit is given as argument to the metaclass
instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Memory1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">Quantity</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">Memory1</span><span class="p">(</span><span class="s">&#39;1 B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">)</span>
<span class="go">2B</span>
</pre></div>
</div>
<p>Optional keyword arguments create additional units; the argument
key gives the unit name, and its value gives the ratio of the new
unit to the base unit.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Memory2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">Quantity</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="n">kB</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">MB</span><span class="o">=</span><span class="mi">1000</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_thousand_kB</span> <span class="o">=</span> <span class="n">Memory2</span><span class="p">(</span><span class="s">&#39;1000kB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MB</span> <span class="o">=</span> <span class="n">Memory2</span><span class="p">(</span><span class="s">&#39;1   MB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a_thousand_kB</span> <span class="o">==</span> <span class="n">MB</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Note that the units (base and additional) are also available as
class attributes for easier referencing in Python code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a_thousand_kB</span> <span class="o">==</span> <span class="n">Memory2</span><span class="o">.</span><span class="n">MB</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.template">
<span id="gc3libs-template"></span><h2><cite>gc3libs.template</cite><a class="headerlink" href="#module-gc3libs.template" title="Permalink to this headline">¶</a></h2>
<p>Support and expansion of programmatic templates.</p>
<p>The module <cite>gc3libs.template</cite> allows creation of textual templates
with a simple object-oriented programming interface: given a string
with a list of substitutions (using the syntax of Python&#8217;s standard
<cite>substitute</cite> module), a set of replacements can be specified, and the
<cite>gc3libs.template.expansions</cite> function will generate all possible
texts coming from the same template.  Templates can be nested, and
expansions generated recursviely.</p>
<dl class="class">
<dt id="gc3libs.template.Template">
<em class="property">class </em><tt class="descclassname">gc3libs.template.</tt><tt class="descname">Template</tt><big>(</big><em>template</em>, <em>validator=&lt;function &lt;lambda&gt; at 0x37d1aa0&gt;</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.template.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>A template object is a pair <cite>(obj, keywords)</cite>.  Methods are
provided to substitute the keyword values into <cite>obj</cite>, and to
iterate over expansions of the given keywords (optionally
filtering the allowed combination of keyword values).</p>
<p>Second optional argument <cite>validator</cite> must be a function that
accepts a set of keyword arguments, and returns <cite>True</cite> if the
keyword combination is valid (can be expanded/substituted back
into the template) or <cite>False</cite> if it should be discarded.
The default validator passes any combination of keywords/values.</p>
<dl class="method">
<dt id="gc3libs.template.Template.expansions">
<tt class="descname">expansions</tt><big>(</big><em>**keywords</em><big>)</big><a class="headerlink" href="#gc3libs.template.Template.expansions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all valid expansions of the templated object
<em>and</em> the template keywords.  Returned items are <cite>Template</cite>
instances constucted with the expanded template object and a
valid combination of keyword values.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.template.Template.substitute">
<tt class="descname">substitute</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.template.Template.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Return result of interpolating the value of keywords into the
template.  Keyword arguments <cite>extra_args</cite> can be used to override
keyword values passed to the constructor.</p>
<p>If the templated object provides a <cite>substitute</cite> method, then
return the result of invoking it with the template keywords as
keyword arguments.  Otherwise, return the result of applying
Python standard library&#8217;s <cite>string.Template.safe_substitute()</cite>
on the string representation of the templated object.</p>
<p>Raise <cite>ValueError</cite> if the set of keywords/values is not valid
according to the validator specified in the constructor.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.template.expansions">
<tt class="descclassname">gc3libs.template.</tt><tt class="descname">expansions</tt><big>(</big><em>obj</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.template.expansions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all expansions of a given object, recursively
expanding all templates found.  How the expansions are actually
computed, depends on the type of object being passed in the first
argument <cite>obj</cite>:</p>
<ul>
<li><p class="first">If <cite>obj</cite> is a <cite>list</cite>, iterate over expansions of items in <cite>obj</cite>.
(In particular, this flattens out nested lists.)</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">L</span><span class="p">))</span>
<span class="go">[0, 2, 3]</span>
</pre></div>
</div>
</li>
<li><p class="first">If <cite>obj</cite> is a dictionary, return dictionary formed by all
combinations of a key <cite>k</cite> in <cite>obj</cite> with an expansion of the
corresponding value <cite>obj[k]</cite>.  Expansions are computed by
recursively calling <cite>expansions(obj[k], **extra_args)</cite>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">D</span><span class="p">))</span>
<span class="go">[{&#39;a&#39;: 1, &#39;b&#39;: 2}, {&#39;a&#39;: 1, &#39;b&#39;: 3}]</span>
</pre></div>
</div>
</li>
<li><p class="first">If <cite>obj</cite> is a <cite>tuple</cite>, iterate over all tuples formed by the
expansion of every item in <cite>obj</cite>.  (Each item <cite>t[i]</cite> is expanded
by calling <cite>expansions(t[i], **extra_args)</cite>.)</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
<span class="go">[(1, 2), (1, 3)]</span>
</pre></div>
</div>
</li>
<li><p class="first">If <cite>obj</cite> is a <cite>Template</cite> class instance, then the returned values
are the result of applying the template to the expansion of each
of its keywords.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">T1</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&quot;a=${n}&quot;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">T1</span><span class="p">))</span>
<span class="go">[Template(&#39;a=${n}&#39;, n=0), Template(&#39;a=${n}&#39;, n=1)]</span>
</pre></div>
</div>
<p>Note that keywords passed to the <cite>expand</cite> invocation override
the ones used in template construction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">T2</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&quot;a=${n}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">T2</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="go">[Template(&#39;a=${n}&#39;, n=1), Template(&#39;a=${n}&#39;, n=3)]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">T3</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="s">&quot;a=${n}&quot;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">T3</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="go">[Template(&#39;a=${n}&#39;, n=2), Template(&#39;a=${n}&#39;, n=3)]</span>
</pre></div>
</div>
</li>
<li><p class="first">Any other value is returned unchanged.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">V</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">expansions</span><span class="p">(</span><span class="n">V</span><span class="p">))</span>
<span class="go">[42]</span>
</pre></div>
</div>
</li>
</ul>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.url">
<span id="gc3libs-url"></span><h2><cite>gc3libs.url</cite><a class="headerlink" href="#module-gc3libs.url" title="Permalink to this headline">¶</a></h2>
<p>Utility classes and methods for dealing with URLs.</p>
<dl class="class">
<dt id="gc3libs.url.Url">
<em class="property">class </em><tt class="descclassname">gc3libs.url.</tt><tt class="descname">Url</tt><a class="headerlink" href="#gc3libs.url.Url" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent a URL as a named-tuple object.  This is an immutable
object that cannot be changed after creation.</p>
<p>The following read-only attributes are defined on objects of class <cite>Url</cite>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="7%" />
<col width="51%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Index</th>
<th class="head">Value</th>
<th class="head">Value if not present</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>scheme</td>
<td>0</td>
<td>URL scheme specifier</td>
<td>empty string</td>
</tr>
<tr class="row-odd"><td>netloc</td>
<td>1</td>
<td>Network location part</td>
<td>empty string</td>
</tr>
<tr class="row-even"><td>path</td>
<td>2</td>
<td>Hierarchical path</td>
<td>empty string</td>
</tr>
<tr class="row-odd"><td>query</td>
<td>3</td>
<td>Query component</td>
<td>empty string</td>
</tr>
<tr class="row-even"><td>hostname</td>
<td>4</td>
<td>Host name (lower case)</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>port</td>
<td>5</td>
<td>Port number as integer (if present)</td>
<td>None</td>
</tr>
<tr class="row-even"><td>username</td>
<td>6</td>
<td>User name</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>password</td>
<td>7</td>
<td>Password</td>
<td>None</td>
</tr>
</tbody>
</table>
<p>There are two ways of constructing <cite>Url</cite> objects:</p>
<ul>
<li><p class="first">By passing a string <cite>urlstring</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;http://www.example.org/data&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">scheme</span>
<span class="go">&#39;http&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">netloc</span>
<span class="go">&#39;www.example.org&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/data&#39;</span>
</pre></div>
</div>
<p>The default URL scheme is <tt class="docutils literal"><span class="pre">file</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">scheme</span>
<span class="go">&#39;file&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/tmp/foo&#39;</span>
</pre></div>
</div>
<p>Please note that extra leading slashes &#8216;/&#8217; are interpreted as
the begining of a network location:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;//foo/bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">netloc</span>
<span class="go">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Url</span><span class="p">(</span><span class="s">&#39;///foo/bar&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/foo/bar&#39;</span>
</pre></div>
</div>
<p>Check RFC 3986 <a class="reference external" href="http://tools.ietf.org/html/rfc3986">http://tools.ietf.org/html/rfc3986</a></p>
<p>If <cite>force_abs</cite> is <cite>True</cite> (default), then the <cite>path</cite>
attribute is made absolute, by calling <cite>os.path.abspath</cite> if
necessary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;foo/bar&#39;</span><span class="p">,</span> <span class="n">force_abs</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Otherwise, if <cite>force_abs</cite> is <cite>False</cite>, then the <cite>path</cite>
attribute stores the passed string unchanged:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">force_abs</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;foo&#39;</span>
</pre></div>
</div>
<p>Other keyword arguments can specify defaults for missing parts
of the URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s">&#39;file&#39;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s">&#39;localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">scheme</span>
<span class="go">&#39;file&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">netloc</span>
<span class="go">&#39;localhost&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/tmp/foo&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">By passing keyword arguments only, to construct an <cite>Url</cite> object
with exactly those values for the named fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="n">netloc</span><span class="o">=</span><span class="s">&#39;www.example.org&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">&#39;/data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this form, the <cite>force_abs</cite> parameter is ignored.</p>
</li>
</ul>
<p>See also: <a class="reference external" href="http://docs.python.org/library/urlparse.html#urlparse-result-object">http://docs.python.org/library/urlparse.html#urlparse-result-object</a></p>
<dl class="method">
<dt id="gc3libs.url.Url.adjoin">
<tt class="descname">adjoin</tt><big>(</big><em>relpath</em><big>)</big><a class="headerlink" href="#gc3libs.url.Url.adjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <cite>Url</cite>, constructed by appending <cite>relpath</cite> to the
path section of this URL.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u0</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;http://www.example.org&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u1</span> <span class="o">=</span> <span class="n">u0</span><span class="o">.</span><span class="n">adjoin</span><span class="p">(</span><span class="s">&#39;data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">u1</span><span class="p">)</span>
<span class="go">&#39;http://www.example.org/data&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">u2</span> <span class="o">=</span> <span class="n">u1</span><span class="o">.</span><span class="n">adjoin</span><span class="p">(</span><span class="s">&#39;moredata&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">u2</span><span class="p">)</span>
<span class="go">&#39;http://www.example.org/data/moredata&#39;</span>
</pre></div>
</div>
<p>Even if <cite>relpath</cite> starts with <cite>/</cite>, it is still appended to the
path in the base URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u3</span> <span class="o">=</span> <span class="n">u2</span><span class="o">.</span><span class="n">adjoin</span><span class="p">(</span><span class="s">&#39;/evenmore&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">u3</span><span class="p">)</span>
<span class="go">&#39;http://www.example.org/data/moredata/evenmore&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.url.UrlKeyDict">
<em class="property">class </em><tt class="descclassname">gc3libs.url.</tt><tt class="descname">UrlKeyDict</tt><big>(</big><em>iter_or_dict=None</em>, <em>force_abs=False</em><big>)</big><a class="headerlink" href="#gc3libs.url.UrlKeyDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary class enforcing that all keys are URLs.</p>
<p>Strings and/or objects returned by <cite>urlparse</cite> can
be used as keys.  Setting a string key automatically
translates it to a URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">print</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">k</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> 
<span class="go">(&lt;class &#39;....Url&#39;&gt;, &#39;/tmp/foo&#39;)</span>
</pre></div>
</div>
<p>Retrieving the value associated with a key works with both the
string or the url value of the key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="n">Url</span><span class="p">(</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">)]</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Key lookup can use both the string or the <cite>Url</cite> value as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;/tmp/foo&#39;</span> <span class="ow">in</span> <span class="n">d</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Url</span><span class="p">(</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">d</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;file:///tmp/foo&#39;</span> <span class="ow">in</span> <span class="n">d</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;http://example.org&#39;</span> <span class="ow">in</span> <span class="n">d</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Class <cite>UrlKeyDict</cite> supports initialization by copying items from
another <cite>dict</cite> instance or from an iterable of (key, value)
pairs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">({</span> <span class="s">&#39;/tmp/foo&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;/tmp/bar&#39;</span><span class="p">:</span><span class="s">&#39;bar&#39;</span> <span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">([</span> <span class="p">(</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;/tmp/bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">)</span> <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Differently from <cite>dict</cite>, initialization from keyword arguments
alone is <em>not</em> supported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d3</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">__init__() got an unexpected keyword argument &#39;foo&#39;</span>
</pre></div>
</div>
<p>An empty <cite>UrlKeyDict</cite> instance is returned by the constructor
when called with no parameters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d0</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">d0</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>If <cite>force_abs</cite> is <cite>True</cite>, then all paths are converted to
absolute ones in the dictionary keys.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">(</span><span class="n">force_abs</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">print</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlKeyDict</span><span class="p">(</span><span class="n">force_abs</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="k">print</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="gc3libs.url.UrlValueDict">
<em class="property">class </em><tt class="descclassname">gc3libs.url.</tt><tt class="descname">UrlValueDict</tt><big>(</big><em>iter_or_dict=None</em>, <em>force_abs=False</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.url.UrlValueDict" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary class enforcing that all values are URLs.</p>
<p>Strings and/or objects returned by <cite>urlparse</cite> can
be used as values.  Setting a string value automatically
translates it to a URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/tmp/foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Url</span><span class="p">(</span><span class="s">&#39;file:///tmp/bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="k">print</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">v</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> 
<span class="go">(&lt;class &#39;....Url&#39;&gt;, &#39;/tmp/foo&#39;)</span>
<span class="go">(&lt;class &#39;....Url&#39;&gt;, &#39;/tmp/bar&#39;)</span>
</pre></div>
</div>
<p>Retrieving the value associated with a key always returns the
URL-type value, regardless of how it was set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">&quot;Url(scheme=&#39;file&#39;, netloc=&#39;&#39;, path=&#39;/tmp/foo&#39;, hostname=None, port=None, username=None, password=None)&quot;</span>
</pre></div>
</div>
<p>Class <cite>UrlValueDict</cite> supports initialization by any of the
methods that work with a plain <cite>dict</cite> instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">({</span> <span class="s">&#39;foo&#39;</span><span class="p">:</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">:</span><span class="s">&#39;/tmp/bar&#39;</span> <span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">([</span> <span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;/tmp/foo&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;/tmp/bar&#39;</span><span class="p">)</span> <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d3</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s">&#39;/tmp/foo&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;/tmp/bar&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">==</span> <span class="n">d2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">==</span> <span class="n">d3</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In particular, an empty <cite>UrlDict</cite> instance is returned by the
constructor when called with no parameters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d0</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">d0</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>If <cite>force_abs</cite> is <cite>True</cite>, then all paths are converted to
absolute ones in the dictionary values.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">(</span><span class="n">force_abs</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="k">print</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">UrlValueDict</span><span class="p">(</span><span class="n">force_abs</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="k">print</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.utils">
<span id="gc3libs-utils"></span><h2><cite>gc3libs.utils</cite><a class="headerlink" href="#module-gc3libs.utils" title="Permalink to this headline">¶</a></h2>
<p>Generic Python programming utility functions.</p>
<p>This module collects general utility functions, not specifically
related to GC3Libs.  A good rule of thumb for determining if a
function or class belongs in here is the following: place a function
or class in this module if you could copy its code into the
sources of a different project and it would not stop working.</p>
<dl class="class">
<dt id="gc3libs.utils.Enum">
<em class="property">class </em><tt class="descclassname">gc3libs.utils.</tt><tt class="descname">Enum</tt><a class="headerlink" href="#gc3libs.utils.Enum" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic enumeration class.  Inspired by:
<a class="reference external" href="http://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python/2182437#2182437">http://stackoverflow.com/questions/36932/whats-the-best-way-to-implement-an-enum-in-python/2182437#2182437</a>
with some more syntactic sugar added.</p>
<p>An <cite>Enum</cite> class must be instanciated with a list of strings, that
make the enumeration &#8220;label&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span><span class="s">&#39;CAT&#39;</span><span class="p">,</span> <span class="s">&#39;DOG&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Each label is available as an instance attribute, evaluating to
itself:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span><span class="o">.</span><span class="n">DOG</span>
<span class="go">&#39;DOG&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Animal</span><span class="o">.</span><span class="n">CAT</span> <span class="o">==</span> <span class="s">&#39;CAT&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<p>As a consequence, you can test for presence of an enumeration
label by string value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;DOG&#39;</span> <span class="ow">in</span> <span class="n">Animal</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Finally, enumeration labels can also be iterated upon:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">Animal</span><span class="p">:</span> <span class="k">print</span> <span class="n">a</span>
<span class="go">DOG</span>
<span class="go">CAT</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="gc3libs.utils.History">
<em class="property">class </em><tt class="descclassname">gc3libs.utils.</tt><tt class="descname">History</tt><a class="headerlink" href="#gc3libs.utils.History" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of messages with timestamps and (optional) tags.</p>
<p>The <cite>append</cite> method should be used to add a message to the <cite>History</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="n">History</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;first message&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;second one&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>last</cite> method returns the text of the last message appended, with its timestamp:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;second one at&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Iterating over a <cite>History</cite> instance returns message texts in the
temporal order they were added to the list, with their timestamp:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> 
<span class="go">first message ...</span>
</pre></div>
</div>
<dl class="method">
<dt id="gc3libs.utils.History.append">
<tt class="descname">append</tt><big>(</big><em>message</em>, <em>*tags</em><big>)</big><a class="headerlink" href="#gc3libs.utils.History.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append a message to this <cite>History</cite>.</p>
<p>The message is timestamped with the time at the moment of the
call.</p>
<p>The optional <cite>tags</cite> argument is a sequence of strings. Tags
are recorded together with the message and may be used to
filter log messages given a set of labels. <em>(This feature is
not yet implemented.)</em></p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.utils.History.format_message">
<tt class="descname">format_message</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#gc3libs.utils.History.format_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a formatted message, appending to the message its timestamp in human readable format.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.utils.History.last">
<tt class="descname">last</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.utils.History.last" title="Permalink to this definition">¶</a></dt>
<dd><p>Return text of last message appended.
If log is empty, return empty string.</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="gc3libs.utils.Log">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">Log</tt><a class="headerlink" href="#gc3libs.utils.Log" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#gc3libs.utils.History" title="gc3libs.utils.History"><tt class="xref py py-class docutils literal"><span class="pre">History</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="gc3libs.utils.PlusInfinity">
<em class="property">class </em><tt class="descclassname">gc3libs.utils.</tt><tt class="descname">PlusInfinity</tt><a class="headerlink" href="#gc3libs.utils.PlusInfinity" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that is greater-than any other object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">PlusInfinity</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">&lt;</span> <span class="n">x</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1245632479102509834570124871023487235987634518745</span> <span class="o">&lt;</span> <span class="n">x</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxint</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">maxint</span> <span class="o">&lt;</span> <span class="n">x</span>
<span class="go">True</span>
</pre></div>
</div>
<p><cite>PlusInfinity</cite> objects are actually larger than <em>any</em> given Python
object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="s">&#39;azz&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="nb">object</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Note that <cite>PlusInfinity</cite> is a singleton, therefore you always get
the same instance when calling the class constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">PlusInfinity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">PlusInfinity</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="ow">is</span> <span class="n">y</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Relational operators try to return the correct value when
comparing <cite>PlusInfinity</cite> to itself:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="gc3libs.utils.Singleton">
<em class="property">class </em><tt class="descclassname">gc3libs.utils.</tt><tt class="descname">Singleton</tt><a class="headerlink" href="#gc3libs.utils.Singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Derived classes of <cite>Singleton</cite> can have only one instance in the
running Python interpreter.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">Singleton</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="ow">is</span> <span class="n">y</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="gc3libs.utils.Struct">
<em class="property">class </em><tt class="descclassname">gc3libs.utils.</tt><tt class="descname">Struct</tt><big>(</big><em>initializer=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.utils.Struct" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>dict</cite>-like object, whose keys can be accessed with the usual
&#8216;[...]&#8217; lookup syntax, or with the &#8216;.&#8217; get attribute syntax.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">x</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Values can also be initially set by specifying them as keyword
arguments to the constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">]</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">z</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Like <cite>dict</cite> instances, <cite>Struct`s have a `copy</cite> method to get a
shallow copy of the instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">z</span>
<span class="go">3</span>
</pre></div>
</div>
<dl class="method">
<dt id="gc3libs.utils.Struct.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.utils.Struct.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a (shallow) copy of this <cite>Struct</cite> instance.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.backup">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">backup</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#gc3libs.utils.backup" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename the filesystem entry at <cite>path</cite> by appending a unique
numerical suffix; return new name.</p>
<p>For example,</p>
<ol class="arabic simple">
<li>create a test file:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>then make a backup of it; the backup will end in <tt class="docutils literal"><span class="pre">.~1~</span></tt>:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">path1</span> <span class="o">=</span> <span class="n">backup</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s">&#39;.~1~&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>3. re-create the file, and make a second backup: this time the
file will be renamed with a <tt class="docutils literal"><span class="pre">.~2~</span></tt> extension:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path2</span> <span class="o">=</span> <span class="n">backup</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span> <span class="o">+</span> <span class="s">&#39;.~2~&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>cleaning up tests</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="s">&#39;.~1~&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="s">&#39;.~2~&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.basename_sans">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">basename_sans</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#gc3libs.utils.basename_sans" title="Permalink to this definition">¶</a></dt>
<dd><p>Return base name without the extension.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.cache_for">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">cache_for</tt><big>(</big><em>lapse</em><big>)</big><a class="headerlink" href="#gc3libs.utils.cache_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache the result of a (nullary) method invocation for a given
amount of time. Use as a decorator on object methods whose results
are to be cached.</p>
<p>Store the result of the first invocation of the decorated
method; if another invocation happens before <cite>lapse</cite> seconds
have passed, return the cached value instead of calling the real
function again.  If a new call happens after the grace period has
expired, call the real function and store the result in the cache.</p>
<p><strong>Note:</strong> Do not use with methods that take keyword arguments, as
they will be discarded! In addition, arguments are compared to
elements in the cache by <em>identity</em>, so that invoking the same
method with equal but distinct object will result in two separate
copies of the result being computed and stored in the cache.</p>
<p>Cache results and timestamps are stored into the objects&#8217;
<cite>_cache_value</cite> and <cite>_cache_last_updated</cite> attributes, so the caches
are destroyed with the object when it goes out of scope.</p>
<p>The working of the cached method can be demonstrated by the
following simple code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">X</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">times</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>    <span class="nd">@cache_for</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>            <span class="bp">self</span><span class="o">.</span><span class="n">times</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>            <span class="k">return</span> <span class="p">(</span><span class="s">&quot;times effectively run: </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">X</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">&#39;times effectively run: 1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">&#39;times effectively run: 1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="go">&#39;times effectively run: 2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.cat">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">cat</tt><big>(</big><em>*args</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.utils.cat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate the contents of all <cite>args</cite> into <cite>output</cite>.  Both
<cite>output</cite> and each of the <cite>args</cite> can be a file-like object or a
string (indicating the path of a file to open).</p>
<p>If <cite>append</cite> is <cite>True</cite>, then <cite>output</cite> is opened in append-only
mode; otherwise it is overwritten.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.copy_recursively">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">copy_recursively</tt><big>(</big><em>src</em>, <em>dst</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#gc3libs.utils.copy_recursively" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy <cite>src</cite> to <cite>dst</cite>, descending it recursively if necessary.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.copyfile">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">copyfile</tt><big>(</big><em>src</em>, <em>dst</em>, <em>overwrite=False</em>, <em>link=False</em><big>)</big><a class="headerlink" href="#gc3libs.utils.copyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file from <cite>src</cite> to <cite>dst</cite>; return <cite>True</cite> if the copy was
actually made.  If <cite>overwrite</cite> is <cite>False</cite> (default), an existing
destination entry is left unchanged and <cite>False</cite> is returned.</p>
<p>If <cite>link</cite> is <cite>True</cite>, an attempt at hard-linking is done first;
failing that, we copy the source file onto the destination
one. Permission bits and modification times are copied as well.</p>
<p>If <cite>dst</cite> is a directory, a file with the same basename as <cite>src</cite> is
created (or overwritten) in the directory specified.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.copytree">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">copytree</tt><big>(</big><em>src</em>, <em>dst</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#gc3libs.utils.copytree" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively copy an entire directory tree rooted at <cite>src</cite>.  If
<cite>overwrite</cite> is <cite>False</cite> (default), entries that already exist in
the destination tree are left unchanged and not overwritten.</p>
<p>See also: <cite>shutil.copytree</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.count">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">count</tt><big>(</big><em>seq</em>, <em>predicate</em><big>)</big><a class="headerlink" href="#gc3libs.utils.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of items in <cite>seq</cite> that match <cite>predicate</cite>.
Argument <cite>predicate</cite> should be a callable that accepts
one argument and returns a boolean.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.defproperty">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">defproperty</tt><big>(</big><em>fn</em><big>)</big><a class="headerlink" href="#gc3libs.utils.defproperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to define properties with a simplified syntax in Python 2.4.
See <a class="reference external" href="http://code.activestate.com/recipes/410698-property-decorator-for-python-24/#c6">http://code.activestate.com/recipes/410698-property-decorator-for-python-24/#c6</a>
for details and examples.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.deploy_configuration_file">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">deploy_configuration_file</tt><big>(</big><em>filename</em>, <em>template_filename=None</em><big>)</big><a class="headerlink" href="#gc3libs.utils.deploy_configuration_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that configuration file <cite>filename</cite> exists; possibly
copying it from the specified <cite>template_filename</cite>.</p>
<p>Return <cite>True</cite> if a file with the specified name exists in the
configuration directory.  If not, try to copy the template file
over and then return <cite>False</cite>; in case the copy operations fails,
a <cite>NoConfigurationFile</cite> exception is raised.</p>
<p>The <cite>template_filename</cite> is always resolved relative to GC3Libs&#8217;
&#8216;package resource&#8217; directory (i.e., the <tt class="docutils literal"><span class="pre">etc/</span></tt> directory in the
sources.  If <cite>template_filename</cite> is <cite>None</cite>, then it is assumed to
be the base name of <cite>filename</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.dirname">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">dirname</tt><big>(</big><em>pathname</em><big>)</big><a class="headerlink" href="#gc3libs.utils.dirname" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <cite>os.path.dirname</cite> but return <cite>.</cite> in case of path names with no directory component.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.first">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">first</tt><big>(</big><em>seq</em><big>)</big><a class="headerlink" href="#gc3libs.utils.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first element of sequence or iterator <cite>seq</cite>.
Raise <cite>TypeError</cite> if the argument does not implement
either of the two interfaces.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">first</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<span class="go">&#39;a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.from_template">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">from_template</tt><big>(</big><em>template</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.utils.from_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the contents of <cite>template</cite>, substituting all occurrences
of Python formatting directives &#8216;%(key)s&#8217; with the corresponding values
taken from dictionary <cite>extra_args</cite>.</p>
<p>If <cite>template</cite> is an object providing a <cite>read()</cite> method, that is
used to gather the template contents; else, if a file named
<cite>template</cite> exists, the template contents are read from it;
otherwise, <cite>template</cite> is treated like a string providing the
template contents itself.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.getattr_nested">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">getattr_nested</tt><big>(</big><em>obj</em>, <em>name</em><big>)</big><a class="headerlink" href="#gc3libs.utils.getattr_nested" title="Permalink to this definition">¶</a></dt>
<dd><p>Like Python&#8217;s <cite>getattr</cite>, but perform a recursive lookup if <cite>name</cite> contains any dots.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.ifelse">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">ifelse</tt><big>(</big><em>test</em>, <em>if_true</em>, <em>if_false</em><big>)</big><a class="headerlink" href="#gc3libs.utils.ifelse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>if_true</cite> is argument <cite>test</cite> evaluates to <cite>True</cite>,
return <cite>if_false</cite> otherwise.</p>
<p>This is just a workaround for Python 2.4 lack of the
conditional assignment operator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;yes&quot;</span><span class="p">,</span> <span class="s">&quot;no&quot;</span><span class="p">);</span> <span class="k">print</span> <span class="n">b</span>
<span class="go">yes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="ow">not</span> <span class="n">a</span><span class="p">,</span> <span class="s">&#39;yay&#39;</span><span class="p">,</span> <span class="s">&#39;nope&#39;</span><span class="p">);</span> <span class="k">print</span> <span class="n">b</span>
<span class="go">nope</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.irange">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">irange</tt><big>(</big><em>start</em>, <em>stop</em>, <em>step=1</em><big>)</big><a class="headerlink" href="#gc3libs.utils.irange" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all values greater or equal than <cite>start</cite> and less than <cite>stop</cite>.
(Or the reverse, if <cite>step &lt; 0</cite>.)</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="go">[0, 3, 6]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">))</span>
<span class="go">[8, 6, 4, 2]</span>
</pre></div>
</div>
<p>Unlike the built-in <cite>range</cite> function, <cite>irange</cite> also accepts
floating-point values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="go">[0.0, 0.5]</span>
</pre></div>
</div>
<p>Also unlike the built-in <cite>range</cite>, <em>both</em> <cite>start</cite> and <cite>stop</cite> have
to be specified:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">irange</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">irange() takes at least 2 arguments (1 given)</span>
</pre></div>
</div>
<p>Of course, a null <cite>step</cite> is not allowed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">irange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">AssertionError</span>: <span class="n">Null step in irange.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.lock">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">lock</tt><big>(</big><em>path</em>, <em>timeout</em>, <em>create=True</em><big>)</big><a class="headerlink" href="#gc3libs.utils.lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Lock the file at <cite>path</cite>.  Raise a <cite>LockTimeout</cite> error if the lock
cannot be acquired within <cite>timeout</cite> seconds.</p>
<p>Return a <cite>lock</cite> object that should be passed unchanged to the
<cite>gc3libs.utils.unlock</cite> function.</p>
<p>If no <cite>path</cite> points to a non-existent location, an empty file is
created before attempting to lock (unless <cite>create</cite> is <cite>False</cite>).
An attempt is made to remove the file in case an error happens.</p>
<p>See also: <a class="reference internal" href="#gc3libs.utils.unlock" title="gc3libs.utils.unlock"><tt class="xref py py-func docutils literal"><span class="pre">gc3libs.utils.unlock()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.mkdir">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">mkdir</tt><big>(</big><em>path</em>, <em>mode=511</em><big>)</big><a class="headerlink" href="#gc3libs.utils.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <cite>os.makedirs</cite>, but does not throw an exception if PATH
already exists.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.mkdir_with_backup">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">mkdir_with_backup</tt><big>(</big><em>path</em>, <em>mode=511</em><big>)</big><a class="headerlink" href="#gc3libs.utils.mkdir_with_backup" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <cite>os.makedirs</cite>, but if <cite>path</cite> already exists and is not empty,
rename the existing one to a backup name (see the <cite>backup</cite> function).</p>
<p>Unlike <cite>os.makedirs</cite>, no exception is thrown if the directory
already exists and is empty, but the target directory permissions
are not altered to reflect <cite>mode</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.prettyprint">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">prettyprint</tt><big>(</big><em>D</em>, <em>indent=0</em>, <em>width=0</em>, <em>maxdepth=None</em>, <em>step=4</em>, <em>only_keys=None</em>, <em>output=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b73995ce1e0&gt;</em>, <em>_key_prefix=''</em>, <em>_exclude=None</em><big>)</big><a class="headerlink" href="#gc3libs.utils.prettyprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Print dictionary instance <cite>D</cite> in a YAML-like format.
Each output line consists of:</p>
<blockquote>
<div><ul class="simple">
<li><cite>indent</cite> spaces,</li>
<li>the key name,</li>
<li>a colon character <tt class="docutils literal"><span class="pre">:</span></tt>,</li>
<li>the associated value.</li>
</ul>
</div></blockquote>
<p>If the total line length exceeds <cite>width</cite>, the value is printed
on the next line, indented by further <cite>step</cite> spaces; a value of 0 for
<cite>width</cite> disables this line wrapping.</p>
<p>Optional argument <cite>only_keys</cite> can be a callable that must return
<cite>True</cite> when called with keys that should be printed, or a list of
key names to print.</p>
<p>Dictionary instances appearing as values are processed recursively
(up to <cite>maxdepth</cite> nesting).  Each nested instance is printed
indented <cite>step</cite> spaces from the enclosing dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.progressive_number">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">progressive_number</tt><big>(</big><em>qty=None</em>, <em>id_filename='/home/rmurri/.gc3/next_id.txt'</em><big>)</big><a class="headerlink" href="#gc3libs.utils.progressive_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a positive integer, whose value is guaranteed to
be monotonically increasing across different invocations
of this function, and also across separate instances of the
calling program.</p>
<p>Example:</p>
<div class="highlight-python"><pre>(create a temporary directory to avoid bug #)</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span><span class="o">,</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">progressive_number</span><span class="p">(</span><span class="n">id_filename</span><span class="o">=</span><span class="n">tmp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">progressive_number</span><span class="p">(</span><span class="n">id_filename</span><span class="o">=</span><span class="n">tmp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you specify a positive integer as argument, then a list of
monotonically increasing numbers is returned.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span> <span class="o">=</span> <span class="n">progressive_number</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">id_filename</span><span class="o">=</span><span class="n">tmp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
<dl class="docutils">
<dt>(clean up test environment)</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>In other words, <cite>progressive_number(N)</cite> is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span> <span class="n">progressive_number</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="p">]</span>
</pre></div>
</div>
<p>only more efficient, because it has to obtain and release the lock
only once.</p>
<p>After every invocation of this function, the last returned number
is stored into the file passed as argument <cite>id_filename</cite>.  If the
file does not exist, an attempt to create it is made before
allocating an id; the method can raise an <cite>IOError</cite> or <cite>OSError</cite>
if <cite>id_filename</cite> cannot be opened for writing.</p>
<p><em>Note:</em> as file-level locking is used to serialize access to the
counter file, this function may block (default timeout: 30
seconds) while trying to acquire the lock, or raise a
<cite>LockTimeout</cite> exception if this fails.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise :</th><td class="field-body">LockTimeout, IOError, OSError</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A positive integer number, monotonically increasing with
every call.  A list of such numbers if argument <cite>qty</cite> is a
positive integer.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.read_contents">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">read_contents</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#gc3libs.utils.read_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the whole contents of the file at <cite>path</cite> as a single string.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">read_contents</span><span class="p">(</span><span class="s">&#39;/dev/null&#39;</span><span class="p">)</span>
<span class="go">&#39;&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">tmpfile</span><span class="p">)</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;hey&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_contents</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>
<span class="go">&#39;hey&#39;</span>
</pre></div>
</div>
<p>(If you run this test, remember to do cleanup afterwards)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.safe_repr">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">safe_repr</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#gc3libs.utils.safe_repr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string describing Python object <cite>obj</cite>.</p>
<p>Avoids calling any Python magic methods, so should be safe to use
as a &#8216;last resort&#8217; in implementation of <cite>__str__</cite> and <cite>__repr__</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.same_docstring_as">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">same_docstring_as</tt><big>(</big><em>referenced_fn</em><big>)</big><a class="headerlink" href="#gc3libs.utils.same_docstring_as" title="Permalink to this definition">¶</a></dt>
<dd><p>Function decorator: sets the docstring of the following function
to the one of <cite>referenced_fn</cite>.</p>
<p>Intended usage is for setting docstrings on methods redefined in
derived classes, so that they inherit the docstring from the
corresponding abstract method in the base class.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.samefile">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">samefile</tt><big>(</big><em>path1</em>, <em>path2</em><big>)</big><a class="headerlink" href="#gc3libs.utils.samefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <cite>os.path.samefile</cite> but return <cite>False</cite> if either one of the
paths does not exist.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.string_to_boolean">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">string_to_boolean</tt><big>(</big><em>word</em><big>)</big><a class="headerlink" href="#gc3libs.utils.string_to_boolean" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert <cite>word</cite> to a Python boolean value and return it.
The strings <cite>true</cite>, <cite>yes</cite>, <cite>on</cite>, <cite>1</cite> (with any
capitalization and any amount of leading and trailing
spaces) are recognized as meaning Python <cite>True</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;yes&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;Yes&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;YES&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39; 1 &#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;True&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;on&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Any other word is considered as boolean <cite>False</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;no&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;No&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;Nay!&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;woo-hoo&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This includes also the empty string and whitespace-only:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">string_to_boolean</span><span class="p">(</span><span class="s">&#39;  &#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.stripped">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">stripped</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#gc3libs.utils.stripped" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over lines in <cite>iterable</cite> and return each of them stripped
of leading and trailing blanks.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.test_file">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">test_file</tt><big>(</big><em>path</em>, <em>mode</em>, <em>exception=&lt;type 'exceptions.RuntimeError'&gt;</em>, <em>isdir=False</em><big>)</big><a class="headerlink" href="#gc3libs.utils.test_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Test for access to a path; if access is not granted, raise an
instance of <cite>exception</cite> with an appropriate error message.
This is a frontend to <tt class="xref py py-func docutils literal"><span class="pre">os.access()</span></tt>, which see for exact
semantics and the meaning of <cite>path</cite> and <cite>mode</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; Filesystem path to test.</li>
<li><strong>mode</strong> &#8211; See <tt class="xref py py-func docutils literal"><span class="pre">os.access()</span></tt></li>
<li><strong>exception</strong> &#8211; Class of exception to raise if test fails.</li>
<li><strong>isdir</strong> &#8211; If <cite>True</cite> then also test that <cite>path</cite> points to a directory.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If the test succeeds, <cite>True</cite> is returned:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/bin/cat&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/bin/cat&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">R_OK</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/bin/cat&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">X_OK</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">X_OK</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>However, if the test fails, then an exception is raised:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/bin/cat&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">W_OK</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Cannot write to file &#39;/bin/cat&#39;.</span>
</pre></div>
</div>
<p>If the optional argument <cite>isdir</cite> is <cite>True</cite>, then additionally test
that <cite>path</cite> points to a directory inode:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">,</span> <span class="n">isdir</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span><span class="p">(</span><span class="s">&#39;/bin/cat&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">F_OK</span><span class="p">,</span> <span class="n">isdir</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">Expected &#39;/bin/cat&#39; to be a directory, but it&#39;s not.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.to_bytes">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">to_bytes</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#gc3libs.utils.to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert string <cite>s</cite> to an integer number of bytes.  Suffixes like
&#8216;KB&#8217;, &#8216;MB&#8217;, &#8216;GB&#8217; (up to &#8216;YB&#8217;), with or without the trailing &#8216;B&#8217;,
are allowed and properly accounted for.  Case is ignored in
suffixes.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;12&#39;</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;12B&#39;</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;12KB&#39;</span><span class="p">)</span>
<span class="go">12000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;1G&#39;</span><span class="p">)</span>
<span class="go">1000000000</span>
</pre></div>
</div>
<p>Binary units &#8216;KiB&#8217;, &#8216;MiB&#8217; etc. are also accepted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;1KiB&#39;</span><span class="p">)</span>
<span class="go">1024</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="s">&#39;1MiB&#39;</span><span class="p">)</span>
<span class="go">1048576</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.uniq">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">uniq</tt><big>(</big><em>seq</em><big>)</big><a class="headerlink" href="#gc3libs.utils.uniq" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all unique elements in sequence <cite>seq</cite>.</p>
<p>Distinct values are returned in a sorted fashion.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.unlock">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">unlock</tt><big>(</big><em>lock</em><big>)</big><a class="headerlink" href="#gc3libs.utils.unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a previously-acquired lock.</p>
<p>Argument <cite>lock</cite> should be the return value of a previous
<cite>gc3libs.utils.lock</cite> call.</p>
<p>See also: <a class="reference internal" href="#gc3libs.utils.lock" title="gc3libs.utils.lock"><tt class="xref py py-func docutils literal"><span class="pre">gc3libs.utils.lock()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.utils.write_contents">
<tt class="descclassname">gc3libs.utils.</tt><tt class="descname">write_contents</tt><big>(</big><em>path</em>, <em>data</em><big>)</big><a class="headerlink" href="#gc3libs.utils.write_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrite the contents of the file at <cite>path</cite> with the given data.
If the file does not exist, it is created.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">tmpfile</span><span class="p">)</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_contents</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">,</span> <span class="s">&#39;big data here&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_contents</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>
<span class="go">&#39;big data here&#39;</span>
</pre></div>
</div>
<p>(If you run this test, remember to clean up afterwards)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmpfile</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gc3libs-resource">
<h2><cite>gc3libs.Resource</cite><a class="headerlink" href="#gc3libs-resource" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This module is deprecated and will be removed in a future release.
Do not depend on it.</p>
</div>
<span class="target" id="module-gc3libs.Resource"></span><p>A specialized dictionary for representing computational resource characteristics.</p>
<dl class="class">
<dt id="gc3libs.Resource.Resource">
<em class="property">class </em><tt class="descclassname">gc3libs.Resource.</tt><tt class="descname">Resource</tt><big>(</big><em>**keywd</em><big>)</big><a class="headerlink" href="#gc3libs.Resource.Resource" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>Resource</cite> objects are dictionaries, comprised of the following keys.</p>
<p>Statically provided, i.e., specified at construction time and changed never after:</p>
<blockquote>
<div>arc_ldap             string
architecture         list of string *
auth                 string  *
frontend             string  *
gamess_location      string
max_cores_per_job    int     *
max_memory_per_core  int     *
max_walltime         int     *
name                 string  *
ncores               int
type                 int     *</div></blockquote>
<p>Starred attributes are required for object construction.</p>
<dl class="docutils">
<dt>Dynamically provided (i.e., defined by the <cite>get_resource_status()</cite> method or similar):</dt>
<dd>free_slots          int
user_run            int
user_queued         int
queued              int</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.application">
<span id="gc3libs-application"></span><h2><cite>gc3libs.application</cite><a class="headerlink" href="#module-gc3libs.application" title="Permalink to this headline">¶</a></h2>
<p>Support for running a generic application with the GC3Libs.</p>
</div>
<div class="section" id="module-gc3libs.application.apppot">
<span id="gc3libs-application-apppot"></span><h2><cite>gc3libs.application.apppot</cite><a class="headerlink" href="#module-gc3libs.application.apppot" title="Permalink to this headline">¶</a></h2>
<p>Support for AppPot-hosted applications.</p>
<p>For more details about AppPot, visit:
&lt;<a class="reference external" href="http://apppot.googlecode.com">http://apppot.googlecode.com</a>&gt;</p>
<dl class="class">
<dt id="gc3libs.application.apppot.AppPotApplication">
<em class="property">class </em><tt class="descclassname">gc3libs.application.apppot.</tt><tt class="descname">AppPotApplication</tt><big>(</big><em>arguments</em>, <em>inputs</em>, <em>outputs</em>, <em>output_dir</em>, <em>apppot_img=None</em>, <em>apppot_changes=None</em>, <em>apppot_tag='ENV/APPPOT-0.21'</em>, <em>apppot_extra=</em><span class="optional">[</span><span class="optional">]</span>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.application.apppot.AppPotApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for AppPot-hosted applications.
Provides the same interface as the base <tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt>
and runs the specified command in an AppPot instance.</p>
<p>In addition to the standard <tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt> keyword
arguments, the following ones can be given to steer the AppPot
execution:</p>
<ul class="simple">
<li><cite>apppot_img</cite>: Path or URL to the AppPot system image to use.
If <tt class="docutils literal"><span class="pre">None</span></tt> (default), then the default AppPot system image
on the remote system is used.</li>
<li><cite>apppot_changes</cite>: Path or URL to an AppPot changes file to be merged
at system startup.</li>
<li><cite>apppot_tag</cite>: ARC RTE to use for submission of this AppPot job.</li>
<li><cite>apppot_extra</cite>: List of additional UML boot command-line arguments.
(Passed to the AppPot instance via <tt class="docutils literal"><span class="pre">apppot-start</span></tt>&#8216;s <tt class="docutils literal"><span class="pre">--extra</span></tt> option.)</li>
</ul>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.application.gamess">
<span id="gc3libs-application-gamess"></span><h2><cite>gc3libs.application.gamess</cite><a class="headerlink" href="#module-gc3libs.application.gamess" title="Permalink to this headline">¶</a></h2>
<p>Specialized support for computational jobs running GAMESS-US.</p>
<dl class="class">
<dt id="gc3libs.application.gamess.GamessAppPotApplication">
<em class="property">class </em><tt class="descclassname">gc3libs.application.gamess.</tt><tt class="descname">GamessAppPotApplication</tt><big>(</big><em>inp_file_path</em>, <em>*other_input_files</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.application.gamess.GamessAppPotApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized <cite>AppPotApplication</cite> object to submit computational
jobs running GAMESS-US.</p>
<p>This class makes no check or guarantee that a GAMESS-US executable
will be available in the executing AppPot instance: the
<cite>apppot_img</cite> and <cite>apppot_tag</cite> keyword arguments can be used to
select the AppPot system image to run this application; see the
<tt class="xref py py-class docutils literal"><span class="pre">AppPotApplication</span></tt> for information.</p>
<p>The <cite>__init__</cite> construction interface is compatible with the one
used in <a class="reference internal" href="#gc3libs.application.gamess.GamessApplication" title="gc3libs.application.gamess.GamessApplication"><tt class="xref py py-class docutils literal"><span class="pre">GamessApplication</span></tt></a>. The only required parameter for
construction is the input file name; any other argument names an
additional input file, that is added to the <cite>Application.inputs</cite>
list, but not otherwise treated specially.</p>
<p>Any other keyword parameter that is valid in the <cite>Application</cite>
class can be used here as well, with the exception of <cite>input</cite> and
<cite>output</cite>.  Note that a GAMESS-US job is <em>always</em> submitted with
<cite>join = True</cite>, therefore any <cite>stderr</cite> setting is ignored.</p>
</dd></dl>

<dl class="class">
<dt id="gc3libs.application.gamess.GamessApplication">
<em class="property">class </em><tt class="descclassname">gc3libs.application.gamess.</tt><tt class="descname">GamessApplication</tt><big>(</big><em>inp_file_path</em>, <em>*other_input_files</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.application.gamess.GamessApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized <cite>Application</cite> object to submit computational jobs running GAMESS-US.</p>
<p>The only required parameter for construction is the input file
name; subsequent positional arguments are additional input files,
that are added to the <cite>Application.inputs</cite> list, but not otherwise
treated specially.</p>
<p>The <cite>verno</cite> parameter is used to request a specific version of
GAMESS-US; if the default value <tt class="docutils literal"><span class="pre">None</span></tt> is used, the default
version of GAMESS-US at the executing site is run.</p>
<p>Any other keyword parameter that is valid in the <cite>Application</cite>
class can be used here as well, with the exception of <cite>input</cite> and
<cite>output</cite>.  Note that a GAMESS-US job is <em>always</em> submitted with
<cite>join = True</cite>, therefore any <cite>stderr</cite> setting is ignored.</p>
<dl class="method">
<dt id="gc3libs.application.gamess.GamessApplication.terminated">
<tt class="descname">terminated</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.application.gamess.GamessApplication.terminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Append to log the termination status line as extracted from
the GAMESS &#8216;.out&#8217; file.</p>
<p>The job exit code <cite>.execution.exitcode</cite> is (re)set according
to the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Exit code</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>the output file contains the string                                <tt class="docutils literal"><span class="pre">EXECUTION</span> <span class="pre">OF</span> <span class="pre">GAMESS</span> <span class="pre">TERMINATED</span> <span class="pre">normally</span></tt></td>
</tr>
<tr class="row-odd"><td>1</td>
<td>the output file contains the string                                <tt class="docutils literal"><span class="pre">EXECUTION</span> <span class="pre">OF</span> <span class="pre">GAMESS</span> <span class="pre">TERMINATED</span> <span class="pre">-ABNORMALLY-</span></tt></td>
</tr>
<tr class="row-even"><td>2</td>
<td>the output file contains the string                                <tt class="docutils literal"><span class="pre">ddikick</span> <span class="pre">exited</span> <span class="pre">unexpectedly</span></tt></td>
</tr>
<tr class="row-odd"><td>70 (<cite>os.EX_SOFTWARE</cite>)</td>
<td>the output file cannot be read or                                does not match any of the above patterns</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.application.rosetta">
<span id="gc3libs-application-rosetta"></span><h2><cite>gc3libs.application.rosetta</cite><a class="headerlink" href="#module-gc3libs.application.rosetta" title="Permalink to this headline">¶</a></h2>
<p>Specialized support for computational jobs running programs in the Rosetta suite.</p>
<dl class="class">
<dt id="gc3libs.application.rosetta.RosettaApplication">
<em class="property">class </em><tt class="descclassname">gc3libs.application.rosetta.</tt><tt class="descname">RosettaApplication</tt><big>(</big><em>application</em>, <em>application_release</em>, <em>inputs</em>, <em>outputs=</em><span class="optional">[</span><span class="optional">]</span>, <em>flags_file=None</em>, <em>database=None</em>, <em>arguments=</em><span class="optional">[</span><span class="optional">]</span>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.application.rosetta.RosettaApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized <cite>Application</cite> object to submit one run of a single
application in the Rosetta suite.</p>
<p>Required parameters for construction:</p>
<blockquote>
<div><ul class="simple">
<li><cite>application</cite>: name of the Rosetta application to call (e.g., &#8220;docking_protocol&#8221; or &#8220;relax&#8221;)</li>
<li><cite>inputs</cite>: a <cite>dict</cite> instance, keys are Rosetta <tt class="docutils literal"><span class="pre">-in:file:*</span></tt> options, values are the (local) path names of the corresponding files.  (Example: <tt class="docutils literal"><span class="pre">inputs={&quot;-in:file:s&quot;:&quot;1brs.pdb&quot;}</span></tt>)</li>
<li><cite>outputs</cite>: list of output file names to fetch after Rosetta has finished running.</li>
</ul>
</div></blockquote>
<p>Optional parameters:</p>
<blockquote>
<div><ul class="simple">
<li><cite>flags_file</cite>: path to a local file containing additional flags for controlling Rosetta invocation; if <cite>None</cite>, a local configuration file will be used.</li>
<li><cite>database</cite>: (local) path to the Rosetta DB; if this is not specified, then it is assumed that the correct location will be available at the remote execution site as environment variable <tt class="docutils literal"><span class="pre">ROSETTA_DB_LOCATION</span></tt></li>
<li><cite>arguments</cite>: If present, they will be appended to the Rosetta application command line.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="gc3libs.application.rosetta.RosettaApplication.terminated">
<tt class="descname">terminated</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.application.rosetta.RosettaApplication.terminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract output files from the tar archive created by the
&#8216;rosetta.sh&#8217; script.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.application.rosetta.RosettaDockingApplication">
<em class="property">class </em><tt class="descclassname">gc3libs.application.rosetta.</tt><tt class="descname">RosettaDockingApplication</tt><big>(</big><em>pdb_file_path</em>, <em>native_file_path=None</em>, <em>number_of_decoys_to_create=1</em>, <em>flags_file=None</em>, <em>application_release='3.1'</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.application.rosetta.RosettaDockingApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized <cite>Application</cite> class for executing a single run of the
Rosetta &#8220;docking_protocol&#8221; application.</p>
<p>Currently used in the <cite>gdocking</cite> app.</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.authentication">
<span id="gc3libs-authentication"></span><h2><cite>gc3libs.authentication</cite><a class="headerlink" href="#module-gc3libs.authentication" title="Permalink to this headline">¶</a></h2>
<p>Authentication support for the GC3Libs.</p>
<dl class="class">
<dt id="gc3libs.authentication.Auth">
<em class="property">class </em><tt class="descclassname">gc3libs.authentication.</tt><tt class="descname">Auth</tt><big>(</big><em>config</em>, <em>auto_enable</em><big>)</big><a class="headerlink" href="#gc3libs.authentication.Auth" title="Permalink to this definition">¶</a></dt>
<dd><p>A mish-mash of authorization functions.</p>
<p>This class actually serves the purposes of:</p>
<ul class="simple">
<li>a registry of authorization &#8216;types&#8217;, mapping internally-assigned
names to Python classes;</li>
<li>storage for the configuration information (which can be
arbitrary, but should probably be read off a configuration
file);</li>
<li>a factory, returning a &#8216;SomeAuth&#8217; object through which clients
can deal with actual authorization issues (like checking if the
authorization credentials are valid and getting/renewing them).</li>
<li>a cache, that tries to avoid expensive re-initializations of
<cite>Auth</cite> objects by allowing only one live instance per type, and
returning it when requested.</li>
</ul>
<div class="admonition-fixme admonition">
<p class="first admonition-title">FIXME</p>
<p>There are several problems with this approach:</p>
<ul class="last simple">
<li>the configuration is assumed <em>static</em> and cannot be changed after
the <cite>Auth</cite> instance is constructed.</li>
<li>there is no communication between the client class and the
<cite>Auth</cite> classes.</li>
<li>there is no control over the lifetime of the cache; at a
minimum, it should be settable per-auth-type.</li>
<li>I&#8217;m unsure whether the mapping of &#8216;type names&#8217; (as in the
<cite>type=...</cite> keyword in the config file) to Python classes
belongs in a generic factory method or in the configuration
file reader.  (Probably the former, so the code here would
actually be right.)</li>
<li>The whole <cite>auto_enable</cite> stuff really belongs to the user-interface
part, which is also hard-coded in the auth classes, and should not be.</li>
</ul>
</div>
<dl class="method">
<dt id="gc3libs.authentication.Auth.add_params">
<tt class="descname">add_params</tt><big>(</big><em>**params</em><big>)</big><a class="headerlink" href="#gc3libs.authentication.Auth.add_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the specified keyword arguments as initialization
parameters to all the configured auth classes.</p>
<p>Parameters that have already been specified are silently
overwritten.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.authentication.Auth.get">
<tt class="descname">get</tt><big>(</big><em>auth_name</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.authentication.Auth.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of the <cite>Auth</cite> class corresponding to the
given <cite>auth_name</cite>, or raise an exception if instanciating the
same class has given an unrecoverable exception in past calls.</p>
<p>Additional keyword arguments are passed unchanged to the class
constructor and can override values specified at configuration time.</p>
<p>Instances are remembered for the lifetime of the program; if
an instance of the given class is already present in the
cache, that one is returned; otherwise, an instance is
contructed with the given parameters.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">The <cite>params</cite> keyword arguments are only used if a new
instance is constructed and are silently ignored if the
cached instance is returned.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3libs.authentication.NoneAuth">
<em class="property">class </em><tt class="descclassname">gc3libs.authentication.</tt><tt class="descname">NoneAuth</tt><big>(</big><em>**auth</em><big>)</big><a class="headerlink" href="#gc3libs.authentication.NoneAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>Auth proxy to use when no auth is needed.</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.authentication.ssh">
<span id="gc3libs-authentication-ssh"></span><h2><cite>gc3libs.authentication.ssh</cite><a class="headerlink" href="#module-gc3libs.authentication.ssh" title="Permalink to this headline">¶</a></h2>
<p>Authentication support for accessing resources through the SSH protocol.</p>
</div>
<div class="section" id="module-gc3libs.authentication.grid">
<span id="gc3libs-authentication-grid"></span><h2><cite>gc3libs.authentication.grid</cite><a class="headerlink" href="#module-gc3libs.authentication.grid" title="Permalink to this headline">¶</a></h2>
<p>Authentication support with Grid proxy certificates.</p>
</div>
<div class="section" id="module-gc3libs.backends">
<span id="gc3libs-backends"></span><h2><cite>gc3libs.backends</cite><a class="headerlink" href="#module-gc3libs.backends" title="Permalink to this headline">¶</a></h2>
<p>Interface to different resource management systems for the GC3Libs.</p>
<dl class="class">
<dt id="gc3libs.backends.LRMS">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.</tt><tt class="descname">LRMS</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for interfacing with a computing resource.</p>
<p>The following construction parameters are also set as instance
attributes.  All of them are mandatory, except <cite>auth</cite>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="21%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute name</th>
<th class="head">Expected Type</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>name</cite></td>
<td>string</td>
<td>A unique identifier for this
resource, used for generating
error message.</td>
</tr>
<tr class="row-odd"><td><cite>architecture</cite></td>
<td>set of
<cite>Run.Arch</cite>
values</td>
<td>Should contain one entry per
each architecture
supported. Valid architecture
values are constants in the
<cite>gc3libs.Run.Arch</cite> class.</td>
</tr>
<tr class="row-even"><td><cite>auth</cite></td>
<td>string</td>
<td>A <cite>gc3libs.authentication.Auth</cite>
instance that will be used to
access the computational
resource associated with this
backend.  The default value
<cite>None</cite> is used to mean that no
authentication credentials are
needed (e.g., access to the
resource has been
pre-authenticated) or is
managed outside of GC3Pie).</td>
</tr>
<tr class="row-odd"><td><cite>max_cores</cite></td>
<td>int</td>
<td>Maximum number of CPU cores
that GC3Pie can allocate on
this resource.</td>
</tr>
<tr class="row-even"><td><cite>max_cores_per_job</cite></td>
<td>int</td>
<td>Maximum number of CPU cores
that GC3Pie can allocate on
this resource <em>for a single
job</em>.</td>
</tr>
<tr class="row-odd"><td><cite>max_memory_per_core</cite></td>
<td>Memory</td>
<td>Maximum memory that
GC3Pie can allocate to jobs on
this resource.  The value is
<em>per core</em>, so the actual
amount allocated to a single
job is the value of this entry
multiplied by the number of
cores requested by the job.</td>
</tr>
<tr class="row-even"><td><cite>max_walltime</cite></td>
<td>Duration</td>
<td>Maximum wall-clock time
that can be allotted
to a single job running on this
resource.</td>
</tr>
</tbody>
</table>
<p>The above should be considered <em>immutable</em> attributes: they are
specified at construction time and changed never after.</p>
<p>The following attributes are instead dynamically provided (i.e.,
defined by the <cite>get_resource_status()</cite> method or similar), thus
can change over the lifetime of the object:</p>
<table border="1" class="docutils">
<colgroup>
<col width="79%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute name</th>
<th class="head">Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>free_slots</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>user_run</td>
<td>int</td>
</tr>
<tr class="row-even"><td>user_queued</td>
<td>int</td>
</tr>
<tr class="row-odd"><td>queued</td>
<td>int</td>
</tr>
</tbody>
</table>
<dl class="staticmethod">
<dt id="gc3libs.backends.LRMS.authenticated">
<em class="property">static </em><tt class="descname">authenticated</tt><big>(</big><em>fn</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.authenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator: mark a function as requiring authentication.</p>
<p>Each invocation of the decorated function causes a call to the
<cite>get</cite> method of the authentication object (configured with the
<cite>auth</cite> parameter to the class constructor).</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.cancel_job">
<tt class="descname">cancel_job</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.cancel_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a running job.  If <cite>app</cite> is associated to a queued or
running remote job, tell the execution middleware to cancel
it.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement gracefully close on LRMS dependent resources
e.g. transport</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.free">
<tt class="descname">free</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free up any remote resources used for the execution of <cite>app</cite>.
In particular, this should delete any remote directories and
files.</p>
<p>Call this method when <cite>app.execution.state</cite> is anything other
than <cite>TERMINATED</cite> results in undefined behavior and will
likely be the cause of errors later on.  Be cautious.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status of the resource associated with this <cite>LRMS</cite>
instance in-place.  Return updated <cite>Resource</cite> object.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.get_results">
<tt class="descname">get_results</tt><big>(</big><em>job</em>, <em>download_dir</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve job output files into local directory <cite>download_dir</cite>
(which must already exists).  Will not overwrite existing
files, unless the optional argument <cite>overwrite</cite> is <cite>True</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.peek">
<tt class="descname">peek</tt><big>(</big><em>app</em>, <em>remote_filename</em>, <em>local_file</em>, <em>offset=0</em>, <em>size=None</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
remote file <cite>remote_filename</cite> and write them into
<cite>local_file</cite>.  If <cite>size</cite> is <cite>None</cite> (default), then snarf
contents of remote file from <cite>offset</cite> unto the end.</p>
<p>Argument <cite>local_file</cite> is either a local path name (string), or
a file-like object supporting a <cite>.write()</cite> method.  If
<cite>local_file</cite> is a path name, it is created if not existent,
otherwise overwritten.</p>
<p>Argument <cite>remote_filename</cite> is the name of a file in the remote job
&#8220;sandbox&#8221;.</p>
<p>Any exception raised by operations will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.submit_job">
<tt class="descname">submit_job</tt><big>(</big><em>application</em>, <em>job</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit an <cite>Application</cite> instance to the configured
computational resource; return a <cite>gc3libs.Job</cite> instance for
controlling the submitted job.</p>
<p>This method only returns if the job is successfully submitted;
upon any failure, an exception is raised.</p>
<p><em>Note:</em></p>
<blockquote>
<div><ol class="arabic simple">
<li><cite>job.state</cite> is <em>not</em> altered; it is the caller&#8217;s
responsibility to update it.</li>
<li>the <cite>job</cite> object may be updated with any information that
is necessary for this LRMS to perform further operations on it.</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the state of the remote job associated with <cite>app</cite> and
update <cite>app.execution.state</cite> accordingly.  Return the
corresponding <cite>Run.State</cite>; see <cite>Run.State</cite> for more details.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.LRMS.validate_data">
<tt class="descname">validate_data</tt><big>(</big><em>data_file_list=None</em><big>)</big><a class="headerlink" href="#gc3libs.backends.LRMS.validate_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.batch">
<span id="gc3libs-backends-batch"></span><h2><cite>gc3libs.backends.batch</cite><a class="headerlink" href="#module-gc3libs.backends.batch" title="Permalink to this headline">¶</a></h2>
<p>This module provides a generic BatchSystem class from which all
batch-like backends should inherit.</p>
<dl class="class">
<dt id="gc3libs.backends.batch.BatchSystem">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.batch.</tt><tt class="descname">BatchSystem</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>frontend</em>, <em>transport</em>, <em>accounting_delay=15</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for backends dealing with a batch-queue system (e.g.,
PBS/TORQUE, Grid Engine, etc.)</p>
<p>This is an abstract class, that you should subclass in order to
interface with a given batch queuing system. (Remember to call
this class&#8217; constructor in the derived class <tt class="docutils literal"><span class="pre">__init__</span></tt> method.)</p>
<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.cancel_job">
<tt class="descname">cancel_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.cancel_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a running job.  If <cite>app</cite> is associated to a queued or
running remote job, tell the execution middleware to cancel
it.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.close">
<tt class="descname">close</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.free">
<tt class="descname">free</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free up any remote resources used for the execution of <cite>app</cite>.
In particular, this should delete any remote directories and
files.</p>
<p>Call this method when <cite>app.execution.state</cite> is anything other
than <cite>TERMINATED</cite> results in undefined behavior and will
likely be the cause of errors later on.  Be cautious.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.get_jobid_from_submit_output">
<tt class="descname">get_jobid_from_submit_output</tt><big>(</big><em>output</em>, <em>regexp</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.get_jobid_from_submit_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the output of the submission command. Regexp is
provided by the caller.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.get_results">
<tt class="descname">get_results</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve job output files into local directory <cite>download_dir</cite>
(which must already exists).  Will not overwrite existing
files, unless the optional argument <cite>overwrite</cite> is <cite>True</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.peek">
<tt class="descname">peek</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
remote file <cite>remote_filename</cite> and write them into
<cite>local_file</cite>.  If <cite>size</cite> is <cite>None</cite> (default), then snarf
contents of remote file from <cite>offset</cite> unto the end.</p>
<p>Argument <cite>local_file</cite> is either a local path name (string), or
a file-like object supporting a <cite>.write()</cite> method.  If
<cite>local_file</cite> is a path name, it is created if not existent,
otherwise overwritten.</p>
<p>Argument <cite>remote_filename</cite> is the name of a file in the remote job
&#8220;sandbox&#8221;.</p>
<p>Any exception raised by operations will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.submit_job">
<tt class="descname">submit_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>This method will create a remote directory to store job&#8217;s
sandbox, and will copy the sandbox in there.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the state of the remote job associated with <cite>app</cite> and
update <cite>app.execution.state</cite> accordingly.  Return the
corresponding <cite>Run.State</cite>; see <cite>Run.State</cite> for more details.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.batch.BatchSystem.validate_data">
<tt class="descname">validate_data</tt><big>(</big><em>data_file_list</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.BatchSystem.validate_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.batch.generic_filename_mapping">
<tt class="descclassname">gc3libs.backends.batch.</tt><tt class="descname">generic_filename_mapping</tt><big>(</big><em>jobname</em>, <em>jobid</em>, <em>file_name</em><big>)</big><a class="headerlink" href="#gc3libs.backends.batch.generic_filename_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Map STDOUT/STDERR filenames (as recorded in <cite>Application.outputs</cite>)
to commonly used default STDOUT/STDERR file names (e.g.,
<tt class="docutils literal"><span class="pre">&lt;jobname&gt;.o&lt;jobid&gt;</span></tt>).</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.arc0">
<span id="gc3libs-backends-arc0"></span><h2><cite>gc3libs.backends.arc0</cite><a class="headerlink" href="#module-gc3libs.backends.arc0" title="Permalink to this headline">¶</a></h2>
<p>Job control on ARC0 resources.</p>
<dl class="class">
<dt id="gc3libs.backends.arc0.ArcLrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.arc0.</tt><tt class="descname">ArcLrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>arc_ldap=None</em>, <em>frontend=None</em>, <em>lost_job_timeout=120</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage jobs through the ARC middleware.</p>
<p>In addition to attributes</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="33%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute name</th>
<th class="head">Type</th>
<th class="head">Required?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>arc_ldap</td>
<td>string</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>frontend</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.cancel_job">
<tt class="descname">cancel_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.cancel_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a running job.  If <cite>app</cite> is associated to a queued or
running remote job, tell the execution middleware to cancel
it.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.free">
<tt class="descname">free</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free up any remote resources used for the execution of <cite>app</cite>.
In particular, this should delete any remote directories and
files.</p>
<p>Call this method when <cite>app.execution.state</cite> is anything other
than <cite>TERMINATED</cite> results in undefined behavior and will
likely be the cause of errors later on.  Be cautious.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><em>obj</em>, <em>*args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dynamic information from the ARC infosystem and set
attributes on the current object accordingly.</p>
<p>The following attributes are set:</p>
<ul class="simple">
<li>total_queued</li>
<li>free_slots</li>
<li>user_running</li>
<li>user_queued</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.get_results">
<tt class="descname">get_results</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve job output files into local directory <cite>download_dir</cite>
(which must already exists).  Will not overwrite existing
files, unless the optional argument <cite>overwrite</cite> is <cite>True</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.peek">
<tt class="descname">peek</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
remote file <cite>remote_filename</cite> and write them into
<cite>local_file</cite>.  If <cite>size</cite> is <cite>None</cite> (default), then snarf
contents of remote file from <cite>offset</cite> unto the end.</p>
<p>Argument <cite>local_file</cite> is either a local path name (string), or
a file-like object supporting a <cite>.write()</cite> method.  If
<cite>local_file</cite> is a path name, it is created if not existent,
otherwise overwritten.</p>
<p>Argument <cite>remote_filename</cite> is the name of a file in the remote job
&#8220;sandbox&#8221;.</p>
<p>Any exception raised by operations will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.submit_job">
<tt class="descname">submit_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit an <cite>Application</cite> instance to the configured
computational resource; return a <cite>gc3libs.Job</cite> instance for
controlling the submitted job.</p>
<p>This method only returns if the job is successfully submitted;
upon any failure, an exception is raised.</p>
<p><em>Note:</em></p>
<blockquote>
<div><ol class="arabic simple">
<li><cite>job.state</cite> is <em>not</em> altered; it is the caller&#8217;s
responsibility to update it.</li>
<li>the <cite>job</cite> object may be updated with any information that
is necessary for this LRMS to perform further operations on it.</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>obj</em>, <em>*args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the state of the ARC0 job associated with <cite>app</cite> and
update <cite>app.execution.state</cite> accordingly.  Return the
corresponding <cite>Run.State</cite>; see <cite>Run.State</cite> for more details.</p>
<p>The mapping of ARC0 job statuses to <cite>Run.State</cite> is as follows:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ARC job status</th>
<th class="head"><cite>Run.State</cite></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ACCEPTED</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-odd"><td>ACCEPTING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-even"><td>SUBMITTING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-odd"><td>PREPARING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-even"><td>PREPARED</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-odd"><td>INLRMS:Q</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-even"><td>INLRMS:R</td>
<td>RUNNING</td>
</tr>
<tr class="row-odd"><td>INLRMS:O</td>
<td>STOPPED</td>
</tr>
<tr class="row-even"><td>INLRMS:E</td>
<td>STOPPED</td>
</tr>
<tr class="row-odd"><td>INLRMS:X</td>
<td>STOPPED</td>
</tr>
<tr class="row-even"><td>INLRMS:S</td>
<td>STOPPED</td>
</tr>
<tr class="row-odd"><td>INLRMS:H</td>
<td>STOPPED</td>
</tr>
<tr class="row-even"><td>FINISHING</td>
<td>RUNNING</td>
</tr>
<tr class="row-odd"><td>EXECUTED</td>
<td>RUNNING</td>
</tr>
<tr class="row-even"><td>FINISHED</td>
<td>TERMINATING</td>
</tr>
<tr class="row-odd"><td>CANCELING</td>
<td>TERMINATING</td>
</tr>
<tr class="row-even"><td>FINISHED</td>
<td>TERMINATING</td>
</tr>
<tr class="row-odd"><td>FAILED</td>
<td>TERMINATING</td>
</tr>
<tr class="row-even"><td>KILLED</td>
<td>TERMINATED</td>
</tr>
<tr class="row-odd"><td>DELETED</td>
<td>TERMINATED</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Any other ARC job status is mapped to <cite>Run.State.UNKNOWN</cite>.  In
particular, querying a job ID that is not found in the ARC
information system will result in <cite>UNKNOWN</cite> state, as will
querying a job that has just been submitted and has not yet
found its way to the infosys.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc0.ArcLrms.validate_data">
<tt class="descname">validate_data</tt><big>(</big><em>data_file_list</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc0.ArcLrms.validate_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.arc1">
<span id="gc3libs-backends-arc1"></span><h2><cite>gc3libs.backends.arc1</cite><a class="headerlink" href="#module-gc3libs.backends.arc1" title="Permalink to this headline">¶</a></h2>
<p>Job control using <tt class="docutils literal"><span class="pre">libarcclient</span></tt>.  (Which can submit to all
EMI-supported resources.)</p>
<dl class="class">
<dt id="gc3libs.backends.arc1.Arc1Lrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.arc1.</tt><tt class="descname">Arc1Lrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>arc_ldap</em>, <em>frontend=None</em>, <em>lost_job_timeout=120</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage jobs through ARC&#8217;s <tt class="docutils literal"><span class="pre">libarcclient</span></tt>.</p>
<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.cancel_job">
<tt class="descname">cancel_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.cancel_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a running job.  If <cite>app</cite> is associated to a queued or
running remote job, tell the execution middleware to cancel
it.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.free">
<tt class="descname">free</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Free up any remote resources used for the execution of <cite>app</cite>.
In particular, this should delete any remote directories and
files.</p>
<p>Call this method when <cite>app.execution.state</cite> is anything other
than <cite>TERMINATED</cite> results in undefined behavior and will
likely be the cause of errors later on.  Be cautious.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><em>obj</em>, <em>*args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dynamic information from the ARC infosystem and set
attributes on the current object accordingly.</p>
<p>The following attributes are set:</p>
<ul class="simple">
<li>total_queued</li>
<li>free_slots</li>
<li>user_running</li>
<li>user_queued</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.get_results">
<tt class="descname">get_results</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve job output files into local directory <cite>download_dir</cite>
(which must already exists).  Will not overwrite existing
files, unless the optional argument <cite>overwrite</cite> is <cite>True</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.peek">
<tt class="descname">peek</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
remote file <cite>remote_filename</cite> and write them into
<cite>local_file</cite>.  If <cite>size</cite> is <cite>None</cite> (default), then snarf
contents of remote file from <cite>offset</cite> unto the end.</p>
<p>Argument <cite>local_file</cite> is either a local path name (string), or
a file-like object supporting a <cite>.write()</cite> method.  If
<cite>local_file</cite> is a path name, it is created if not existent,
otherwise overwritten.</p>
<p>Argument <cite>remote_filename</cite> is the name of a file in the remote job
&#8220;sandbox&#8221;.</p>
<p>Any exception raised by operations will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.submit_job">
<tt class="descname">submit_job</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit an <cite>Application</cite> instance to the configured
computational resource; return a <cite>gc3libs.Job</cite> instance for
controlling the submitted job.</p>
<p>This method only returns if the job is successfully submitted;
upon any failure, an exception is raised.</p>
<p><em>Note:</em></p>
<blockquote>
<div><ol class="arabic simple">
<li><cite>job.state</cite> is <em>not</em> altered; it is the caller&#8217;s
responsibility to update it.</li>
<li>the <cite>job</cite> object may be updated with any information that
is necessary for this LRMS to perform further operations on it.</li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>obj</em>, <em>*args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the state of the ARC job associated with <cite>app</cite> and
update <cite>app.execution.state</cite> accordingly.  Return the
corresponding <cite>Run.State</cite>; see <cite>Run.State</cite> for more details.</p>
<p>The mapping of ARC job statuses to <cite>Run.State</cite> is as follows:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ARC job status</th>
<th class="head"><cite>Run.State</cite></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ACCEPTED</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-odd"><td>SUBMITTING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-even"><td>PREPARING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-odd"><td>QUEUING</td>
<td>SUBMITTED</td>
</tr>
<tr class="row-even"><td>RUNNING</td>
<td>RUNNING</td>
</tr>
<tr class="row-odd"><td>FINISHING</td>
<td>RUNNING</td>
</tr>
<tr class="row-even"><td>FINISHED</td>
<td>TERMINATING</td>
</tr>
<tr class="row-odd"><td>FAILED</td>
<td>TERMINATING</td>
</tr>
<tr class="row-even"><td>KILLED</td>
<td>TERMINATED</td>
</tr>
<tr class="row-odd"><td>DELETED</td>
<td>TERMINATED</td>
</tr>
<tr class="row-even"><td>HOLD</td>
<td>STOPPED</td>
</tr>
<tr class="row-odd"><td>OTHER</td>
<td>UNKNOWN</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Any other ARC job status is mapped to <cite>Run.State.UNKNOWN</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.arc1.Arc1Lrms.validate_data">
<tt class="descname">validate_data</tt><big>(</big><em>data_file_list</em><big>)</big><a class="headerlink" href="#gc3libs.backends.arc1.Arc1Lrms.validate_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the list of files is expressed in one of the file transfer protocols the LRMS supports.
Return False otherwise</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.lsf">
<span id="gc3libs-backends-lsf"></span><h2><cite>gc3libs.backends.lsf</cite><a class="headerlink" href="#module-gc3libs.backends.lsf" title="Permalink to this headline">¶</a></h2>
<p>Job control on SGE clusters (possibly connecting to the front-end via SSH).</p>
<dl class="class">
<dt id="gc3libs.backends.lsf.LsfLrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.lsf.</tt><tt class="descname">LsfLrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>frontend</em>, <em>transport</em>, <em>accounting_delay=15</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.lsf.LsfLrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Job control on LSF clusters (possibly by connecting via SSH to a submit node).</p>
<dl class="method">
<dt id="gc3libs.backends.lsf.LsfLrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><em>obj</em>, <em>*args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.lsf.LsfLrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get dynamic information out of the LSF subsystem.</p>
<p>return self</p>
<p>dynamic information required (at least those):
total_queued
free_slots
user_running
user_queued</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.sge">
<span id="gc3libs-backends-sge"></span><h2><cite>gc3libs.backends.sge</cite><a class="headerlink" href="#module-gc3libs.backends.sge" title="Permalink to this headline">¶</a></h2>
<p>Job control on SGE clusters (possibly connecting to the front-end via SSH).</p>
<dl class="class">
<dt id="gc3libs.backends.sge.SgeLrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.sge.</tt><tt class="descname">SgeLrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>frontend</em>, <em>transport</em>, <em>accounting_delay=15</em>, <em>default_pe=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.SgeLrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Job control on SGE clusters (possibly by connecting via SSH to a submit node).</p>
<dl class="method">
<dt id="gc3libs.backends.sge.SgeLrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.SgeLrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status of the resource associated with this <cite>LRMS</cite>
instance in-place.  Return updated <cite>Resource</cite> object.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.sge.compute_nr_of_slots">
<tt class="descclassname">gc3libs.backends.sge.</tt><tt class="descname">compute_nr_of_slots</tt><big>(</big><em>qstat_output</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.compute_nr_of_slots" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the number of total, free, and used/reserved slots from
the output of SGE&#8217;s <tt class="docutils literal"><span class="pre">qstat</span> <span class="pre">-F</span></tt>.</p>
<p>Return a dictionary instance, mapping each host name into a
dictionary instance, mapping the strings <tt class="docutils literal"><span class="pre">total</span></tt>, <tt class="docutils literal"><span class="pre">available</span></tt>,
and <tt class="docutils literal"><span class="pre">unavailable</span></tt> to (respectively) the the total number of
slots on the host, the number of free slots on the host, and the
number of used+reserved slots on the host.</p>
<p>Cluster-wide totals are associated with key <tt class="docutils literal"><span class="pre">global</span></tt>.</p>
<p><strong>Note:</strong> The &#8216;available slots&#8217; computation carried out by this
function is unreliable: there is indeed no notion of a &#8216;global&#8217; or
even &#8216;per-host&#8217; number of &#8216;free&#8217; slots in SGE.  Slot numbers can
be computed per-queue, but a host can belong in different queues
at the same time; therefore the number of &#8216;free&#8217; slots available
to a job actually depends on the queue it is submitted to.  Since
SGE does not force users to submit explicitly to a queue, rather
encourages use of a sort of &#8216;implicit&#8217; routing queue, there is no
way to compute the number of free slots, as this entirely depends
on how local policies will map a job to the available queues.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.sge.count_jobs">
<tt class="descclassname">gc3libs.backends.sge.</tt><tt class="descname">count_jobs</tt><big>(</big><em>qstat_output</em>, <em>whoami</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.count_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse SGE&#8217;s <tt class="docutils literal"><span class="pre">qstat</span></tt> output (as contained in string <cite>qstat_output</cite>)
and return a quadruple <cite>(R, Q, r, q)</cite> where:</p>
<blockquote>
<div><ul class="simple">
<li><cite>R</cite> is the total number of running jobs in the SGE cell (from any user);</li>
<li><cite>Q</cite> is the total number of queued jobs in the SGE cell (from any user);</li>
<li><cite>r</cite> is the number of running jobs submitted by user <cite>whoami</cite>;</li>
<li><cite>q</cite> is the number of queued jobs submitted by user <cite>whoami</cite></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.sge.parse_qhost_f">
<tt class="descclassname">gc3libs.backends.sge.</tt><tt class="descname">parse_qhost_f</tt><big>(</big><em>qhost_output</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.parse_qhost_f" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse SGE&#8217;s <tt class="docutils literal"><span class="pre">qhost</span> <span class="pre">-F</span></tt> output (as contained in string <cite>qhost_output</cite>)
and return a <cite>dict</cite> instance, mapping each host name to its attributes.</p>
</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.sge.parse_qstat_f">
<tt class="descclassname">gc3libs.backends.sge.</tt><tt class="descname">parse_qstat_f</tt><big>(</big><em>qstat_output</em><big>)</big><a class="headerlink" href="#gc3libs.backends.sge.parse_qstat_f" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse SGE&#8217;s <tt class="docutils literal"><span class="pre">qstat</span> <span class="pre">-F</span></tt> output (as contained in string <cite>qstat_output</cite>)
and return a <cite>dict</cite> instance, mapping each queue name to its attributes.</p>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.pbs">
<span id="gc3libs-backends-pbs"></span><h2><cite>gc3libs.backends.pbs</cite><a class="headerlink" href="#module-gc3libs.backends.pbs" title="Permalink to this headline">¶</a></h2>
<p>Job control on PBS/Torque clusters (possibly connecting to the front-end via SSH).</p>
<dl class="class">
<dt id="gc3libs.backends.pbs.PbsLrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.pbs.</tt><tt class="descname">PbsLrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth</em>, <em>frontend</em>, <em>transport</em>, <em>accounting_delay=15</em>, <em>queue=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.pbs.PbsLrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Job control on PBS/Torque clusters (possibly by connecting via SSH to a submit node).</p>
<dl class="method">
<dt id="gc3libs.backends.pbs.PbsLrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#gc3libs.backends.pbs.PbsLrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status of the resource associated with this <cite>LRMS</cite>
instance in-place.  Return updated <cite>Resource</cite> object.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gc3libs.backends.pbs.count_jobs">
<tt class="descclassname">gc3libs.backends.pbs.</tt><tt class="descname">count_jobs</tt><big>(</big><em>qstat_output</em>, <em>whoami</em><big>)</big><a class="headerlink" href="#gc3libs.backends.pbs.count_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse PBS/Torque&#8217;s <tt class="docutils literal"><span class="pre">qstat</span></tt> output (as contained in string <cite>qstat_output</cite>)
and return a quadruple <cite>(R, Q, r, q)</cite> where:</p>
<blockquote>
<div><ul class="simple">
<li><cite>R</cite> is the total number of running jobs in the PBS/Torque cell (from any user);</li>
<li><cite>Q</cite> is the total number of queued jobs in the PBS/Torque cell (from any user);</li>
<li><cite>r</cite> is the number of running jobs submitted by user <cite>whoami</cite>;</li>
<li><cite>q</cite> is the number of queued jobs submitted by user <cite>whoami</cite></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.shellcmd">
<span id="gc3libs-backends-shellcmd"></span><h2><cite>gc3libs.backends.shellcmd</cite><a class="headerlink" href="#module-gc3libs.backends.shellcmd" title="Permalink to this headline">¶</a></h2>
<p>Run applications as local processes.</p>
<dl class="class">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms">
<em class="property">class </em><tt class="descclassname">gc3libs.backends.shellcmd.</tt><tt class="descname">ShellcmdLrms</tt><big>(</big><em>name</em>, <em>architecture</em>, <em>max_cores</em>, <em>max_cores_per_job</em>, <em>max_memory_per_core</em>, <em>max_walltime</em>, <em>auth=None</em>, <em>time_cmd='/usr/bin/time'</em>, <em>spooldir=None</em>, <em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an <tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt> instance as a local process.</p>
<p>Construction of an instance of <cite>ShellcmdLrms</cite> takes the following
optional parameters (in addition to any parameters taken by the
base class <tt class="xref py py-class docutils literal"><span class="pre">LRMS</span></tt>):</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time_cmd</strong> (<em>str</em>) &#8211; <p>Path to the GNU <tt class="docutils literal"><span class="pre">time</span></tt> command.  Default is
<tt class="file docutils literal"><span class="pre">/usr/bin/time</span></tt> which is correct on all known Linux
distributions.</p>
<p>This backend uses many of the
extended features of GNU <tt class="docutils literal"><span class="pre">time</span></tt>, so the shell-builtins or the
BSD <tt class="docutils literal"><span class="pre">time</span></tt> will not work.</p>
</li>
<li><strong>spooldir</strong> (<em>str</em>) &#8211; Path to a filesystem location where to create
temporary working directories for processes executed through
this backend. The default value <cite>None</cite> means to use <tt class="docutils literal"><span class="pre">$TMPDIR</span></tt>
or <tt class="file docutils literal"><span class="pre">/tmp</span></tt> (see <cite>tempfile.mkftemp</cite> for details).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.cancel_job">
<tt class="descname">cancel_job</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.cancel_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a running job.</p>
<p>If <cite>app</cite> is associated to a queued or running remote job, tell
the execution middleware to cancel it.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement gracefully close on LRMS dependent resources
e.g. transport</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.free">
<tt class="descname">free</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.free" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the temporary directory where a child process has run.</p>
<p>The temporary directory is removed with all its content,
recursively.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.get_resource_status">
<tt class="descname">get_resource_status</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.get_resource_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status of the resource associated with this <cite>LRMS</cite>
instance in-place.  Return updated <cite>Resource</cite> object.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.get_results">
<tt class="descname">get_results</tt><big>(</big><em>app</em>, <em>download_dir</em>, <em>overwrite=False</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve job output files into local directory <cite>download_dir</cite>
(which must already exists).  Will not overwrite existing
files, unless the optional argument <cite>overwrite</cite> is <cite>True</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.peek">
<tt class="descname">peek</tt><big>(</big><em>app</em>, <em>remote_filename</em>, <em>local_file</em>, <em>offset=0</em>, <em>size=None</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.peek" title="Permalink to this definition">¶</a></dt>
<dd><p>Download <cite>size</cite> bytes (at offset <cite>offset</cite> from the start) from
remote file <cite>remote_filename</cite> and write them into
<cite>local_file</cite>.  If <cite>size</cite> is <cite>None</cite> (default), then snarf
contents of remote file from <cite>offset</cite> unto the end.</p>
<p>Argument <cite>local_file</cite> is either a local path name (string), or
a file-like object supporting a <cite>.write()</cite> method.  If
<cite>local_file</cite> is a path name, it is created if not existent,
otherwise overwritten.</p>
<p>Argument <cite>remote_filename</cite> is the name of a file in the remote job
&#8220;sandbox&#8221;.</p>
<p>Any exception raised by operations will be passed through.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.submit_job">
<tt class="descname">submit_job</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an <cite>Application</cite> instance as a local process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">See :</th><td class="field-body"><cite>LRMS.submit_job</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.update_job_state">
<tt class="descname">update_job_state</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.update_job_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the running status of the local process whose PID is
stored into <cite>app.execution.lrms_jobid</cite>, and map the POSIX
process status to GC3Libs <cite>Run.State</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3libs.backends.shellcmd.ShellcmdLrms.validate_data">
<tt class="descname">validate_data</tt><big>(</big><em>data_file_list=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#gc3libs.backends.shellcmd.ShellcmdLrms.validate_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>False</cite> if any of the URLs in <cite>data_file_list</cite> cannot
be handled by this backend.</p>
<p>The <tt class="xref py py-mod docutils literal"><span class="pre">shellcmd</span></tt> backend can only handle <tt class="docutils literal"><span class="pre">file</span></tt> URLs.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gc3libs.backends.transport">
<span id="gc3libs-backends-transport"></span><h2><cite>gc3libs.backends.transport</cite><a class="headerlink" href="#module-gc3libs.backends.transport" title="Permalink to this headline">¶</a></h2>
<p>The <cite>Transport</cite> class hierarchy provides an abstraction layer to
execute commands and copy/move files irrespective of whether the
destination is the local computer or a remote front-end that we access
via SSH.</p>
</div>
</div>
<div class="section" id="gc3utils-modules">
<h1>GC3Utils modules<a class="headerlink" href="#gc3utils-modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-gc3utils">
<span id="gc3utils"></span><h2><cite>gc3utils</cite><a class="headerlink" href="#module-gc3utils" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-gc3utils.frontend">
<span id="gc3utils-frontend"></span><h2><cite>gc3utils.frontend</cite><a class="headerlink" href="#module-gc3utils.frontend" title="Permalink to this headline">¶</a></h2>
<p>gc3utils - A simple command-line frontend to distributed resources</p>
<p>This is a generic front-end code; actual implementation of commands
can be found in gc3utils/commands.py</p>
<dl class="function">
<dt id="gc3utils.frontend.main">
<tt class="descclassname">gc3utils.frontend.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.frontend.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic front-end function to invoke the commands in <cite>gc3utils/commands.py</cite></p>
</dd></dl>

</div>
<div class="section" id="module-gc3utils.commands">
<span id="gc3utils-commands"></span><h2><cite>gc3utils.commands</cite><a class="headerlink" href="#module-gc3utils.commands" title="Permalink to this headline">¶</a></h2>
<p>Implementation of the <cite>core</cite> command-line front-ends.</p>
<dl class="class">
<dt id="gc3utils.commands.cmd_gclean">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gclean</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gclean" title="Permalink to this definition">¶</a></dt>
<dd><p>Permanently remove jobs from local and remote storage.</p>
<p>In normal operation, only jobs that are in a terminal status can
be removed; if you want to force <tt class="docutils literal"><span class="pre">gclean</span></tt> to remove a job that
is not in any one of those states, add the <tt class="docutils literal"><span class="pre">-f</span></tt> option to the
command line.</p>
<p>If a job description cannot be successfully read, the
corresponding job will not be deleted; use the <tt class="docutils literal"><span class="pre">-f</span></tt> option to
force removal of a job regardless.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gget">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gget</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gget" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve output files of a job.</p>
<p>Output files can only be retrieved once a job has reached the
&#8216;RUNNING&#8217; state; this command will print an error message if
no output files are available.</p>
<p>Output files can be retrieved multiple times until a job reaches
&#8216;TERMINATED&#8217; state: after that, the remote storage will be
released once the output files have been fetched.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_ginfo">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_ginfo</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_ginfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Print detailed information about a job.</p>
<p>A complete dump of all the information known about jobs listed on
the command line is printed; this will only make sense if you know
GC3Libs internals.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gkill">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gkill</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gkill" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a submitted job.  Given a list of jobs, try to cancel each
one of them; exit with code 0 if all jobs were cancelled
successfully, and 1 if some job was not.</p>
<p>The command will print an error message if a job cannot be
canceled because it&#8217;s in NEW or TERMINATED state, or if some other
error occurred.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gresub">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gresub</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gresub" title="Permalink to this definition">¶</a></dt>
<dd><p>Resubmit an already-submitted job with (possibly) different parameters.</p>
<p>If you resubmit a job that is not in terminal state, the existing job
is canceled before re-submission.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gselect">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gselect</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gselect" title="Permalink to this definition">¶</a></dt>
<dd><p>Select job IDs based on specific criteria</p>
<dl class="method">
<dt id="gc3utils.commands.cmd_gselect.filter_by_iofile">
<tt class="descname">filter_by_iofile</tt><big>(</big><em>job_list</em>, <em>ifile=None</em>, <em>ofile=None</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gselect.filter_by_iofile" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter <cite>job_list</cite> based on the <em>basename</em> of their input or
output files. It will return any file which matches both
<cite>ifile</cite> and <cite>ofile</cite>.</p>
<p>Returns an updated job list.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gselect.filter_by_regexp">
<tt class="descname">filter_by_regexp</tt><big>(</big><em>job_list</em>, <em>regexp</em>, <em>attribute='jobname'</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gselect.filter_by_regexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter <cite>job_list</cite> by selecting only the jobs which attribute
<cite>attribute</cite> match the supplied regexp.</p>
<p>Returns an updated job list.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gselect.filter_by_state">
<tt class="descname">filter_by_state</tt><big>(</big><em>job_list</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gselect.filter_by_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter <cite>job_list</cite> by selecting only the jobs which
match the desired state(s).</p>
<p>Returns an updated job list.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gselect.filter_by_submission_date">
<tt class="descname">filter_by_submission_date</tt><big>(</big><em>job_list</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gselect.filter_by_submission_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter <cite>job_list</cite> by submission date. Only job which have been
submitted within the range specified by command line will be
selected.</p>
<p>Returns an updated job list.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gservers">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gservers</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gservers" title="Permalink to this definition">¶</a></dt>
<dd><p>List status of computational resources.</p>
<dl class="method">
<dt id="gc3utils.commands.cmd_gservers.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gservers.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Override <tt class="xref py py-class docutils literal"><span class="pre">GC3UtilsScript</span></tt> <cite>setup</cite> method since we
don&#8217;t need any <cite>session</cite> argument.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gservers.setup_args">
<tt class="descname">setup_args</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gservers.setup_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Override <tt class="xref py py-class docutils literal"><span class="pre">GC3UtilsScript</span></tt> <cite>setup_args</cite> method since we
don&#8217;t operate on jobs but on resources.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gsession">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gsession</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gsession" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage sessions</p>
<dl class="method">
<dt id="gc3utils.commands.cmd_gsession.abort_session">
<tt class="descname">abort_session</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gsession.abort_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Called with subcommand <cite>abort</cite>.</p>
<p>This method will open
the desired session and will kill all the jobs which belongs
to that session and remove them from store.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gsession.delete_session">
<tt class="descname">delete_session</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gsession.delete_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Called with subcommand <cite>delete</cite>.</p>
<p>This method will first call <cite>abort</cite> and then remove the
current session.</p>
<p>If the <cite>abort</cite> will fail or not all tasks have been removed
from the session, it will not delete the session and will exit
with exit value <cite>1</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gsession.list_jobs">
<tt class="descname">list_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gsession.list_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when subcommand is <cite>list</cite>.</p>
<p>This method basically call the command &#8220;gstat -n -v -s SESSION&#8221;</p>
</dd></dl>

<dl class="method">
<dt id="gc3utils.commands.cmd_gsession.show_log">
<tt class="descname">show_log</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gsession.show_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when subcommand is <cite>log</cite>.</p>
<p>This method will print the history of the jobs in SESSION in a
logfile fashon</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gstat">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gstat</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gstat" title="Permalink to this definition">¶</a></dt>
<dd><p>Print job state.</p>
</dd></dl>

<dl class="class">
<dt id="gc3utils.commands.cmd_gtail">
<em class="property">class </em><tt class="descclassname">gc3utils.commands.</tt><tt class="descname">cmd_gtail</tt><big>(</big><em>**extra_args</em><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gtail" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the last lines from a job&#8217;s standard output or error stream.
Optionally, keep running and displaying the last part of the file
as more lines are written to the given stream.</p>
<dl class="method">
<dt id="gc3utils.commands.cmd_gtail.setup_args">
<tt class="descname">setup_args</tt><big>(</big><big>)</big><a class="headerlink" href="#gc3utils.commands.cmd_gtail.setup_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Override <tt class="xref py py-class docutils literal"><span class="pre">GC3UtilsScript</span></tt> <cite>setup_args</cite> method since we
don&#8217;t operate on single jobs.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">GC3Libs programming API</a><ul>
<li><a class="reference internal" href="#module-gc3libs"><cite>gc3libs</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.cmdline"><cite>gc3libs.cmdline</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.config"><cite>gc3libs.config</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.core"><cite>gc3libs.core</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.workflow"><cite>gc3libs.workflow</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.exceptions"><cite>gc3libs.exceptions</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.persistence"><cite>gc3libs.persistence</cite></a><ul>
<li><a class="reference internal" href="#a-usage-warning">A usage warning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-gc3libs.quantity"><cite>gc3libs.quantity</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.template"><cite>gc3libs.template</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.url"><cite>gc3libs.url</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.utils"><cite>gc3libs.utils</cite></a></li>
<li><a class="reference internal" href="#gc3libs-resource"><cite>gc3libs.Resource</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.application"><cite>gc3libs.application</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.application.apppot"><cite>gc3libs.application.apppot</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.application.gamess"><cite>gc3libs.application.gamess</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.application.rosetta"><cite>gc3libs.application.rosetta</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.authentication"><cite>gc3libs.authentication</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.authentication.ssh"><cite>gc3libs.authentication.ssh</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.authentication.grid"><cite>gc3libs.authentication.grid</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends"><cite>gc3libs.backends</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.batch"><cite>gc3libs.backends.batch</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.arc0"><cite>gc3libs.backends.arc0</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.arc1"><cite>gc3libs.backends.arc1</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.lsf"><cite>gc3libs.backends.lsf</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.sge"><cite>gc3libs.backends.sge</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.pbs"><cite>gc3libs.backends.pbs</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.shellcmd"><cite>gc3libs.backends.shellcmd</cite></a></li>
<li><a class="reference internal" href="#module-gc3libs.backends.transport"><cite>gc3libs.backends.transport</cite></a></li>
</ul>
</li>
<li><a class="reference internal" href="#gc3utils-modules">GC3Utils modules</a><ul>
<li><a class="reference internal" href="#module-gc3utils"><cite>gc3utils</cite></a></li>
<li><a class="reference internal" href="#module-gc3utils.frontend"><cite>gc3utils.frontend</cite></a></li>
<li><a class="reference internal" href="#module-gc3utils.commands"><cite>gc3utils.commands</cite></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial/warholize.html"
                        title="previous chapter">GC3Pie tutorial - Warholize</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../contributing.html"
                        title="next chapter">Contributing to GC3Pie</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../contributing.html" title="Contributing to GC3Pie"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial/warholize.html" title="GC3Pie tutorial - Warholize"
             >previous</a> |</li>
        <li><a href="../index.html">gc3pie development (SVN $Revision$) documentation</a> &raquo;</li>
          <li><a href="index.html" >GC3Libs</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010-2012, Grid Computing Competence Centre, University of Zurich.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>